!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("name",[],t):"object"==typeof exports?exports.name=t():e.name=t()}(window,(function(){return(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1096:function(e,t,a){"use strict";(function(e){!function(e){const t=e.System.constructor.prototype,a=-1!==navigator.userAgent.indexOf("Trident");let n,r,s;const l=t.import;t.import=function(t,i){return function(){n=r=void 0;for(const t in e)!e.hasOwnProperty(t)||!isNaN(t)&&t<e.length||a&&e[t]&&e[t].parent===window||(n?r||(r=t):n=t,s=t)}(),l.call(this,t,i)};const i=[[],function(){return{}}],{getRegister:o}=t;t.getRegister=function(){const t=o.call(this);if(t)return t;const l=function(){let t,l=0;for(const s in e)if(!(!e.hasOwnProperty(s)||!isNaN(s)&&s<e.length||a&&e[s]&&e[s].parent===window)){if(0===l&&s!==n||1===l&&s!==r)return s;l++,t=s}if(t!==s)return t}();if(!l)return i;let c;try{c=e[l]}catch(e){return i}return[[],function(e){return{execute(){e({default:c,__useDefault:!0})}}}]}}("undefined"!=typeof self?self:e)}).call(this,a(86))},11:function(e,t,a){e.exports={"mb-2":"mb-2__2ta5S","list-unstyled":"list-unstyled__kZCPI","half-opacity":"half-opacity__1sZDT",hidden:"hidden__10kN_","hidden-input":"hidden-input__2O9CC","icon-home":"icon-home__9mkMU","icon-monitoring":"icon-monitoring__3bsEu","icon-reporting":"icon-reporting__2Quc0","icon-configuration":"icon-configuration__2X7qh","icon-administration":"icon-administration__2wpj_","icon-poller":"icon-poller__2DCfM","icon-link":"icon-link__2Whi5","icon-clock":"icon-clock__3O62S","icon-database":"icon-database__1-sC7","icon-hosts":"icon-hosts__z9H07","icon-services":"icon-services__uDUVS","icon-user":"icon-user__2GUcX","icon-copy":"icon-copy__3b9uU","icon-copied":"icon-copied__y11_2",iconmoon:"iconmoon__2c25A",btn:"btn__2kmV4","btn-green":"btn-green__rUln3","btn-red":"btn-red__3veA5",logout:"logout__1ZeD9",header:"header__hZqPy","header-icons":"header-icons__1zcvW","wrap-left-icon":"wrap-left-icon__3cOOB",pollers:"pollers__bRb5S","wrap-left-icon__name":"wrap-left-icon__name__3eFYs",round:"round__C-m84",red:"red__7ZwQt",orange:"orange__394rN",green:"green__2hM4C","wrap-left-pollers":"wrap-left-pollers__2lVD0","submenu-active":"submenu-active__qsloM",submenu:"submenu__3SvPd","wrap-middle-icon":"wrap-middle-icon__TRTOs","round-big":"round-big__10Vxl",number:"number__30Eyv","red-bordered":"red-bordered__2JEQM","gray-dark":"gray-dark__2ndqD","gray-dark-bordered":"gray-dark-bordered__yfQ68","green-bordered":"green-bordered__30vCY","orange-bordered":"orange-bordered__I4gJe","gray-light":"gray-light__2b_Bo","gray-light-bordered":"gray-light-bordered__2lq5n",blue:"blue__2LZ70","blue-bordered":"blue-bordered__bkZ3L","wrap-right":"wrap-right__1w0YA","wrap-right-hosts":"wrap-right-hosts__2QM8Q","wrap-right-services":"wrap-right-services__3cXeq","wrap-right-user":"wrap-right-user__ZtyW7","custom-icon":"custom-icon__2yQ8F","wrap-right-icon":"wrap-right-icon__1QRox",hosts:"hosts__755Sg","wrap-right-icon__name":"wrap-right-icon__name__12WFd","wrap-right-date":"wrap-right-date__1RDac","wrap-right-time":"wrap-right-time__3UFgQ","wrap-right-timestamp":"wrap-right-timestamp__KO0F1",wrap:"wrap__pzu2B","submenu-top-button":"submenu-top-button__3Oqk7","submenu-item-link":"submenu-item-link__2qzxQ","submenu-count":"submenu-count__2EqGg",profile:"profile__-ZHVu","submenu-user-type":"submenu-user-type__3Dvbu","submenu-user-edit":"submenu-user-edit__3QhJE","submenu-user-button":"submenu-user-button__39j2t","btn-logout-icon":"btn-logout-icon__o8KE5","submenu-bookmark-link":"submenu-bookmark-link__3qusH","submenu-user-name":"submenu-user-name__2XQ-n","button-wrap":"button-wrap__3YbsQ","submenu-top-item":"submenu-top-item__1_wZj","errors-running":"errors-running__sFXX4","submenu-top-item-link":"submenu-top-item-link__2b7ey","submenu-top-count":"submenu-top-count__1oNb3","toggle-submenu-arrow":"toggle-submenu-arrow__KfQJB","dot-colored":"dot-colored__tIyeV",gray:"gray__1NFZe",FullScreen:"FullScreen__2XW28",wrapper:"wrapper__3CyO4","submenu-toggle":"submenu-toggle__2fG9Z","submenu-toggle-active":"submenu-toggle-active__282Lh",link:"link__j2s98"}},1118:function(e,t){},1119:function(e,t,a){var n={"./af":561,"./af.js":561,"./ar":562,"./ar-dz":563,"./ar-dz.js":563,"./ar-kw":564,"./ar-kw.js":564,"./ar-ly":565,"./ar-ly.js":565,"./ar-ma":566,"./ar-ma.js":566,"./ar-sa":567,"./ar-sa.js":567,"./ar-tn":568,"./ar-tn.js":568,"./ar.js":562,"./az":569,"./az.js":569,"./be":570,"./be.js":570,"./bg":571,"./bg.js":571,"./bm":572,"./bm.js":572,"./bn":573,"./bn.js":573,"./bo":574,"./bo.js":574,"./br":575,"./br.js":575,"./bs":576,"./bs.js":576,"./ca":577,"./ca.js":577,"./cs":578,"./cs.js":578,"./cv":579,"./cv.js":579,"./cy":580,"./cy.js":580,"./da":581,"./da.js":581,"./de":582,"./de-at":583,"./de-at.js":583,"./de-ch":584,"./de-ch.js":584,"./de.js":582,"./dv":585,"./dv.js":585,"./el":586,"./el.js":586,"./en-SG":587,"./en-SG.js":587,"./en-au":588,"./en-au.js":588,"./en-ca":589,"./en-ca.js":589,"./en-gb":590,"./en-gb.js":590,"./en-ie":591,"./en-ie.js":591,"./en-il":592,"./en-il.js":592,"./en-nz":593,"./en-nz.js":593,"./eo":594,"./eo.js":594,"./es":595,"./es-do":596,"./es-do.js":596,"./es-us":597,"./es-us.js":597,"./es.js":595,"./et":598,"./et.js":598,"./eu":599,"./eu.js":599,"./fa":600,"./fa.js":600,"./fi":601,"./fi.js":601,"./fo":602,"./fo.js":602,"./fr":603,"./fr-ca":604,"./fr-ca.js":604,"./fr-ch":605,"./fr-ch.js":605,"./fr.js":603,"./fy":606,"./fy.js":606,"./ga":607,"./ga.js":607,"./gd":608,"./gd.js":608,"./gl":609,"./gl.js":609,"./gom-latn":610,"./gom-latn.js":610,"./gu":611,"./gu.js":611,"./he":612,"./he.js":612,"./hi":613,"./hi.js":613,"./hr":614,"./hr.js":614,"./hu":615,"./hu.js":615,"./hy-am":616,"./hy-am.js":616,"./id":617,"./id.js":617,"./is":618,"./is.js":618,"./it":619,"./it-ch":620,"./it-ch.js":620,"./it.js":619,"./ja":621,"./ja.js":621,"./jv":622,"./jv.js":622,"./ka":623,"./ka.js":623,"./kk":624,"./kk.js":624,"./km":625,"./km.js":625,"./kn":626,"./kn.js":626,"./ko":627,"./ko.js":627,"./ku":628,"./ku.js":628,"./ky":629,"./ky.js":629,"./lb":630,"./lb.js":630,"./lo":631,"./lo.js":631,"./lt":632,"./lt.js":632,"./lv":633,"./lv.js":633,"./me":634,"./me.js":634,"./mi":635,"./mi.js":635,"./mk":636,"./mk.js":636,"./ml":637,"./ml.js":637,"./mn":638,"./mn.js":638,"./mr":639,"./mr.js":639,"./ms":640,"./ms-my":641,"./ms-my.js":641,"./ms.js":640,"./mt":642,"./mt.js":642,"./my":643,"./my.js":643,"./nb":644,"./nb.js":644,"./ne":645,"./ne.js":645,"./nl":646,"./nl-be":647,"./nl-be.js":647,"./nl.js":646,"./nn":648,"./nn.js":648,"./pa-in":649,"./pa-in.js":649,"./pl":650,"./pl.js":650,"./pt":651,"./pt-br":652,"./pt-br.js":652,"./pt.js":651,"./ro":653,"./ro.js":653,"./ru":654,"./ru.js":654,"./sd":655,"./sd.js":655,"./se":656,"./se.js":656,"./si":657,"./si.js":657,"./sk":658,"./sk.js":658,"./sl":659,"./sl.js":659,"./sq":660,"./sq.js":660,"./sr":661,"./sr-cyrl":662,"./sr-cyrl.js":662,"./sr.js":661,"./ss":663,"./ss.js":663,"./sv":664,"./sv.js":664,"./sw":665,"./sw.js":665,"./ta":666,"./ta.js":666,"./te":667,"./te.js":667,"./tet":668,"./tet.js":668,"./tg":669,"./tg.js":669,"./th":670,"./th.js":670,"./tl-ph":671,"./tl-ph.js":671,"./tlh":672,"./tlh.js":672,"./tr":673,"./tr.js":673,"./tzl":674,"./tzl.js":674,"./tzm":675,"./tzm-latn":676,"./tzm-latn.js":676,"./tzm.js":675,"./ug-cn":677,"./ug-cn.js":677,"./uk":678,"./uk.js":678,"./ur":679,"./ur.js":679,"./uz":680,"./uz-latn":681,"./uz-latn.js":681,"./uz.js":680,"./vi":682,"./vi.js":682,"./x-pseudo":683,"./x-pseudo.js":683,"./yo":684,"./yo.js":684,"./zh-cn":685,"./zh-cn.js":685,"./zh-hk":686,"./zh-hk.js":686,"./zh-tw":687,"./zh-tw.js":687};function r(e){var t=s(e);return a(t)}function s(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=s,e.exports=r,r.id=1119},1306:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(20),l=a(280),i=a(758),o=a.n(i),c=a(759),m=a.n(c),d=a(1412),u=a(8),p=a.n(u),h=a(11),g=a.n(h),b=a(112),f=a(44),v=a.n(f),E=(a(1094),a(1095),a(1096),a(760)),_=a.n(E),y=function(e,t,a,n){return new(a||(a=Promise))((function(r,s){function l(e){try{o(n.next(e))}catch(e){s(e)}}function i(e){try{o(n.throw(e))}catch(e){s(e)}}function o(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(l,i)}o((n=n.apply(e,t||[])).next())}))};const w=({basename:e,file:t})=>new Promise((a,n)=>y(void 0,void 0,void 0,(function*(){try{const n="$centreonExternalModule$"+t.replace(/(^\.?\/)|(\.js)/g,"").replace(/\//g,"$");if("object"!=typeof window[n]){const a=yield window.System.import(e+t);window[n]=a}a(window[n])}catch(e){n(e)}}))),k=({basename:e,files:t})=>{const a=t.map(t=>w({basename:e,file:t}));return Promise.all(a)},S=(e,t)=>new Promise((a,n)=>y(void 0,void 0,void 0,(function*(){const{js:{commons:n,chunks:r,bundle:s},css:l}=t;if(!s)return console.error(new Error("dynamic import should contains js parameter.")),null;try{l&&l.length>0&&(yield _.a.fetch({address:e+l})),yield k({basename:e,files:n}),yield k({basename:e,files:r});const t=yield w({basename:e,file:s});return a(t)}catch(e){console.error(e)}})));var O=a(72),j=a.n(O);var C=e=>j.a.create({baseURL:"./api/"+e}),I=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a};const x=e=>{var{history:t,hooks:a,path:n}=e,s=I(e,["history","hooks","path"]);const l=t.createHref({pathname:"/",search:"",hash:""});return r.a.createElement(r.a.Fragment,null,Object.entries(a).filter(([e])=>e.includes(n)).map(([,e])=>{const t=r.a.lazy(()=>S(l,e));return r.a.createElement(t,Object.assign({key:n,centreonAxios:C},s))}))},N=r.a.memo(e=>r.a.createElement(n.Suspense,{fallback:null},r.a.createElement(x,Object.assign({},e))),({hooks:e},{hooks:t})=>v()(e,t));var T=Object(s.connect)(({externalComponents:e})=>({hooks:e.hooks}))(Object(b.o)(N));var D=a(3),A=a.n(D),P=a(4),L=a(31),F=a(159);const R=(e,t)=>{for(const a of["groups","children"])t[a]&&(e=t[a].reduce(R,e));return!0===t.is_react?e.push(t.url):t.page&&e.push(t.page),e},z=Object(F.a)(e=>e.navigation.items,e=>e.reduce(R,[])),M=(e,t)=>e&&0!==e.length&&e[t]?e[t].warning?"orange":e[t].critical?"red":"green":"green";class $ extends n.Component{constructor(){super(...arguments),this.pollerService=C("internal.php?object=centreon_topcounter&action=pollersListIssues"),this.refreshInterval=null,this.state={toggled:!1,data:null,intervalApplied:!1},this.getData=()=>{this.pollerService.get().then(({data:e})=>{this.setState({data:e})}).catch(e=>{e.response&&401===e.response.status&&this.setState({data:null})})},this.UNSAFE_componentWillReceiveProps=e=>{const{refreshTime:t}=e,{intervalApplied:a}=this.state;t&&!a&&(this.getData(),this.refreshInterval=setInterval(()=>{this.getData()},t),this.setState({intervalApplied:!0}))},this.toggle=()=>{const{toggled:e}=this.state;this.setState({toggled:!e})},this.handleClick=e=>{this.poller&&!this.poller.contains(e.target)&&this.setState({toggled:!1})}}componentDidMount(){window.addEventListener("mousedown",this.handleClick,!1)}componentWillUnmount(){window.removeEventListener("mousedown",this.handleClick,!1),clearInterval(this.refreshInterval)}render(){const{data:e,toggled:t}=this.state;if(!e)return null;const{allowedPages:a}=this.props,n=a.includes("60901"),s=(e=>{const t=M(e,"database"),a=M(e,"latency");return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:p()(g.a["wrap-left-icon"],g.a.round,g.a[t])},r.a.createElement("span",{className:p()(g.a.iconmoon,g.a["icon-database"]),title:"green"===t?P.I18n.t("OK: all database poller updates are active"):P.I18n.t("Some database poller updates are not active; check your configuration")})),r.a.createElement("span",{className:p()(g.a["wrap-left-icon"],g.a.round,g.a[a])},r.a.createElement("span",{className:p()(g.a.iconmoon,g.a["icon-clock"]),title:"green"===a?P.I18n.t("OK: no latency detected on your platform"):P.I18n.t("Latency detected, check configuration for better optimization")})))})(e.issues);return r.a.createElement("div",{className:p()(g.a["wrap-left-pollers"],{[g.a["submenu-active"]]:t})},s,r.a.createElement("div",{ref:e=>this.poller=e},r.a.createElement("span",{className:p()(g.a["wrap-left-icon"],g.a.pollers),onClick:this.toggle},r.a.createElement("span",{className:p()(g.a.iconmoon,g.a["icon-poller"])}),r.a.createElement("span",{className:g.a["wrap-left-icon__name"]},r.a.createElement(P.Translate,{value:"Pollers"}))),r.a.createElement("span",{className:g.a["toggle-submenu-arrow"],onClick:this.toggle},this.props.children),r.a.createElement("div",{className:p()(g.a.submenu,g.a.pollers)},r.a.createElement("div",{className:g.a["submenu-inner"]},r.a.createElement("ul",{className:p()(g.a["submenu-items"],g.a["list-unstyled"])},r.a.createElement("li",{className:g.a["submenu-item"]},r.a.createElement("span",{className:g.a["submenu-item-link"]},r.a.createElement(P.Translate,{value:"All pollers"}),r.a.createElement("span",{className:g.a["submenu-count"]},e.total?e.total:"..."))),e.issues?Object.entries(e.issues).map(([e,t])=>{let a="";return"database"===e?a=P.I18n.t("Database updates not active"):"stability"===e?a=P.I18n.t("Pollers not running"):"latency"===e&&(a=P.I18n.t("Latency detected")),r.a.createElement("li",{key:e,className:g.a["submenu-top-item"]},r.a.createElement("span",{className:g.a["submenu-top-item-link"]},a,r.a.createElement("span",{className:g.a["submenu-top-count"]},t.total?t.total:"...")),Object.entries(t).map(([e,t])=>{if(t.poller){return t.poller.map(t=>{let a="red";return"warning"===e&&(a="orange"),r.a.createElement("span",{key:t.name,className:g.a["submenu-top-item-link"],style:{padding:"0px 16px 17px"}},r.a.createElement("span",{className:p()(g.a["dot-colored"],g.a[a])},t.name))})}return null}))}):null,n&&r.a.createElement(L.Link,{to:"/main.php?p=60901"},r.a.createElement("button",{onClick:this.toggle,className:p()(g.a.btn,g.a["btn-big"],g.a["btn-green"],g.a["submenu-top-button"])},r.a.createElement(P.Translate,{value:"Configure pollers"}))))))))}}var G=Object(s.connect)(e=>({allowedPages:z(e),refreshTime:!!e.intervals&&1e3*parseInt(e.intervals.AjaxTimeReloadStatistic)}),{})($);$.propTypes={allowedPages:A.a.arrayOf(A.a.string).isRequired,refreshTime:A.a.oneOfType([A.a.number,A.a.bool]).isRequired};var B=a(204),W=a.n(B);const q=(e,t,a)=>{const n=""!==e?W.a.unix(a).tz(e):W.a.unix(a);return t=null!==t?n.locale(t):n,{date:n.format("LL"),time:n.format("LT")}};class U extends n.Component{constructor(){super(...arguments),this.clockService=C("internal.php?object=centreon_topcounter&action=clock"),this.refreshTimeout=null,this.state={data:null},this.getData=()=>{this.clockService.get().then(({data:e})=>{this.setState({data:q(e.timezone,e.locale,e.time)},this.refreshData)})},this.refreshData=()=>{clearTimeout(this.refreshTimeout),this.refreshTimeout=setTimeout(()=>{this.getData()},3e4)}}componentDidMount(){this.getData()}componentWillUnmount(){clearTimeout(this.refreshTimeout)}render(){const{data:e}=this.state;return e?r.a.createElement("div",{className:g.a["wrap-right-timestamp"]},r.a.createElement("span",{className:g.a["wrap-right-date"]},e.date),r.a.createElement("span",{className:g.a["wrap-right-time"]},e.time)):null}}var H=U;class V extends n.Component{constructor(){super(...arguments),this.userService=C("internal.php?object=centreon_topcounter&action=user"),this.refreshTimeout=null,this.state={toggled:!1,copied:!1,data:null},this.getData=()=>{this.userService.get().then(({data:e})=>{this.setState({data:e},this.refreshData)}).catch(e=>{e.response&&401===e.response.status&&this.setState({data:null})})},this.refreshData=()=>{clearTimeout(this.refreshTimeout),this.refreshTimeout=setTimeout(()=>{this.getData()},6e4)},this.toggle=()=>{const{toggled:e}=this.state;this.setState({toggled:!e})},this.onCopy=()=>{this.autologinNode.select(),window.document.execCommand("copy"),this.setState({copied:!0})},this.handleClick=e=>{this.profile&&!this.profile.contains(e.target)&&this.setState({toggled:!1})}}componentDidMount(){window.addEventListener("mousedown",this.handleClick,!1),this.getData()}componentWillUnmount(){window.removeEventListener("mousedown",this.handleClick,!1),clearTimeout(this.refreshTimeout)}render(){const{data:e,toggled:t,copied:a}=this.state;if(!e)return null;const{allowedPages:n}=this.props,s=n.includes("50104"),{fullname:l,username:i,autologinkey:o}=e,c=`${window.location.href+(window.location.search?"&":"?")}autologin=1&useralias=${i}&token=${o}`;return r.a.createElement("div",{className:p()(g.a["wrap-right-user"],{[g.a["submenu-active"]]:t})},r.a.createElement(H,null),r.a.createElement("div",{ref:e=>this.profile=e},r.a.createElement("span",{className:p()(g.a.iconmoon,g.a["icon-user"]),onClick:this.toggle}),r.a.createElement("div",{className:p()(g.a.submenu,g.a.profile)},r.a.createElement("div",{className:g.a["submenu-inner"]},r.a.createElement("ul",{className:p()(g.a["submenu-items"],g.a["list-unstyled"])},r.a.createElement("li",{className:g.a["submenu-item"]},r.a.createElement("span",{className:g.a["submenu-item-link"]},r.a.createElement("span",{className:g.a["submenu-user-name"]},l),r.a.createElement("span",{className:g.a["submenu-user-type"]},r.a.createElement(P.Translate,{value:"as"})," "+i),s&&r.a.createElement(L.Link,{to:"/main.php?p=50104&o=c",className:g.a["submenu-user-edit"],onClick:this.toggle},r.a.createElement(P.Translate,{value:"Edit profile"})))),o&&r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:g.a["submenu-user-button"],onClick:this.onCopy},r.a.createElement(P.Translate,{value:"Copy autologin link"}),r.a.createElement("span",{className:p()(g.a["btn-logout-icon"],g.a[a?"icon-copied":"icon-copy"])})),r.a.createElement("textarea",{id:"autologin-input",className:g.a["hidden-input"],ref:e=>this.autologinNode=e,value:c}))),r.a.createElement("div",{className:g.a["button-wrap"]},r.a.createElement("a",{href:"index.php?disconnect=1"},r.a.createElement("button",{className:p()(g.a.btn,g.a["btn-small"],g.a.logout)},r.a.createElement(P.Translate,{value:"Logout"}))))))))}}var K=Object(s.connect)(e=>({allowedPages:z(e)}),{})(V),X=a(45),Q=a(47),J=a.n(Q),Y=a(1355),Z=a(1356),ee=a(1357),te=a(1358),ae=a(1359),ne=a(1360);const re=X.b().required().integer(),se=X.c().shape({down:X.c().shape({total:re,unhandled:re}),unreachable:X.c().shape({total:re,unhandled:re}),ok:re,pending:re,total:re,refreshTime:re});class le extends n.Component{constructor(){super(...arguments),this.hostsService=C("internal.php?object=centreon_topcounter&action=hosts_status"),this.refreshInterval=null,this.state={toggled:!1,data:null,intervalApplied:!1},this.getData=()=>{this.hostsService.get().then(({data:e})=>{se.validate(e).then(()=>{this.setState({data:e})})}).catch(e=>{e.response&&401===e.response.status&&this.setState({data:null})})},this.UNSAFE_componentWillReceiveProps=e=>{const{refreshTime:t}=e,{intervalApplied:a}=this.state;t&&!a&&(this.getData(),this.refreshInterval=setInterval(()=>{this.getData()},t),this.setState({intervalApplied:!0}))},this.toggle=()=>{const{toggled:e}=this.state;this.setState({toggled:!e})},this.handleClick=e=>{this.host&&!this.host.contains(e.target)&&this.setState({toggled:!1})}}componentDidMount(){window.addEventListener("mousedown",this.handleClick,!1)}componentWillUnmount(){window.removeEventListener("mousedown",this.handleClick,!1),clearInterval(this.refreshInterval)}render(){const{data:e,toggled:t}=this.state;return e?r.a.createElement("div",{className:g.a.wrapper+" wrap-right-hosts",ref:e=>this.host=e},r.a.createElement(Y.a,{submenuType:"top",active:t},r.a.createElement(Z.a,{iconType:"hosts",iconName:"Hosts",onClick:this.toggle}),r.a.createElement(L.Link,{className:p()(g.a.link,g.a["wrap-middle-icon"]),to:"/main.php?p=20202&o=h_down&search="},r.a.createElement(ee.a,{iconType:""+(e.down.unhandled>0?"colored":"bordered"),iconColor:"red",iconNumber:r.a.createElement("span",{id:"count-host-down"},J()(e.down.unhandled).format("0a"))})),r.a.createElement(L.Link,{className:p()(g.a.link,g.a["wrap-middle-icon"]),to:"/main.php?p=20202&o=h_unreachable&search="},r.a.createElement(ee.a,{iconType:""+(e.unreachable.unhandled>0?"colored":"bordered"),iconColor:"gray-dark",iconNumber:r.a.createElement("span",{id:"count-host-unreachable"},J()(e.unreachable.unhandled).format("0a"))})),r.a.createElement(L.Link,{className:p()(g.a.link,g.a["wrap-middle-icon"]),to:"/main.php?p=20202&o=h_up&search="},r.a.createElement(ee.a,{iconType:""+(e.ok>0?"colored":"bordered"),iconColor:"green",iconNumber:r.a.createElement("span",{id:"count-host-up"},J()(e.ok).format("0a"))})),r.a.createElement(te.a,{iconType:"arrow",ref:this.setWrapperRef,rotate:t,onClick:this.toggle}),r.a.createElement("div",{className:p()(g.a["submenu-toggle"],{[g.a["submenu-toggle-active"]]:t})},r.a.createElement(ae.a,null,r.a.createElement(L.Link,{to:"/main.php?p=20202&o=h&search=",className:g.a.link,onClick:this.toggle},r.a.createElement(ne.a,{submenuTitle:P.I18n.t("All"),submenuCount:J()(e.total).format()})),r.a.createElement(L.Link,{to:"/main.php?p=20202&o=h_down&search=",className:g.a.link,onClick:this.toggle},r.a.createElement(ne.a,{dotColored:"red",submenuTitle:P.I18n.t("Down"),submenuCount:`${J()(e.down.unhandled).format("0a")}/${J()(e.down.total).format("0a")}`})),r.a.createElement(L.Link,{to:"/main.php?p=20202&o=h_unreachable&search=",className:g.a.link,onClick:this.toggle},r.a.createElement(ne.a,{dotColored:"gray",submenuTitle:P.I18n.t("Unreachable"),submenuCount:`${J()(e.unreachable.unhandled).format("0a")}/${J()(e.unreachable.total).format("0a")}`})),r.a.createElement(L.Link,{to:"/main.php?p=20202&o=h_up&search=",className:g.a.link,onClick:this.toggle},r.a.createElement(ne.a,{dotColored:"green",submenuTitle:P.I18n.t("Up"),submenuCount:J()(e.ok).format()})),r.a.createElement(L.Link,{to:"/main.php?p=20202&o=h_pending&search=",className:g.a.link,onClick:this.toggle},r.a.createElement(ne.a,{dotColored:"blue",submenuTitle:P.I18n.t("Pending"),submenuCount:J()(e.pending).format()})))))):null}}var ie=Object(s.connect)(({intervals:e})=>({refreshTime:!!e&&1e3*parseInt(e.AjaxTimeReloadMonitoring)}),{})(le);le.propTypes={refreshTime:A.a.oneOfType([A.a.number,A.a.bool]).isRequired};const oe=X.b().required().integer(),ce=X.c().shape({critical:X.c().shape({total:oe,unhandled:oe}),warning:X.c().shape({total:oe,unhandled:oe}),unknown:X.c().shape({total:oe,unhandled:oe}),ok:oe,pending:oe,total:oe,refreshTime:oe});class me extends n.Component{constructor(){super(...arguments),this.servicesStatusService=C("internal.php?object=centreon_topcounter&action=servicesStatus"),this.refreshInterval=null,this.state={toggled:!1,data:null,intervalApplied:!1},this.getData=()=>{this.servicesStatusService.get().then(({data:e})=>{ce.validate(e).then(()=>{this.setState({data:e})})}).catch(e=>{e.response&&401===e.response.status&&this.setState({data:null})})},this.UNSAFE_componentWillReceiveProps=e=>{const{refreshTime:t}=e,{intervalApplied:a}=this.state;t&&!a&&(this.getData(),this.refreshInterval=setInterval(()=>{this.getData()},t),this.setState({intervalApplied:!0}))},this.toggle=()=>{const{toggled:e}=this.state;this.setState({toggled:!e})},this.handleClick=e=>{this.service&&!this.service.contains(e.target)&&this.setState({toggled:!1})}}componentDidMount(){window.addEventListener("mousedown",this.handleClick,!1)}componentWillUnmount(){window.removeEventListener("mousedown",this.handleClick,!1),clearInterval(this.refreshInterval)}render(){const{data:e,toggled:t}=this.state;return e?r.a.createElement("div",{className:g.a.wrapper+" wrap-right-services",ref:e=>this.service=e},r.a.createElement(Y.a,{submenuType:"top",active:t},r.a.createElement(Z.a,{iconType:"services",iconName:"services",onClick:this.toggle}),r.a.createElement(L.Link,{className:p()(g.a.link,g.a["wrap-middle-icon"]),to:"/main.php?p=20201&o=svc_unhandled&statusFilter=critical&search="},r.a.createElement(ee.a,{iconType:""+(e.critical.unhandled>0?"colored":"bordered"),iconColor:"red",iconNumber:r.a.createElement("span",{id:"count-svc-critical"},J()(e.critical.unhandled).format("0a"))})),r.a.createElement(L.Link,{className:p()(g.a.link,g.a["wrap-middle-icon"]),to:"/main.php?p=20201&o=svc_unhandled&statusFilter=warning&search="},r.a.createElement(ee.a,{iconType:""+(e.warning.unhandled>0?"colored":"bordered"),iconColor:"orange",iconNumber:r.a.createElement("span",{id:"count-svc-warning"},J()(e.warning.unhandled).format("0a"))})),r.a.createElement(L.Link,{className:p()(g.a.link,g.a["wrap-middle-icon"]),to:"/main.php?p=20201&o=svc_unhandled&statusFilter=unknown&search="},r.a.createElement(ee.a,{iconType:""+(e.unknown.unhandled>0?"colored":"bordered"),iconColor:"gray-light",iconNumber:r.a.createElement("span",{id:"count-svc-unknown"},J()(e.unknown.unhandled).format("0a"))})),r.a.createElement(L.Link,{className:p()(g.a.link,g.a["wrap-middle-icon"]),to:"/main.php?p=20201&o=svc&statusFilter=ok&search="},r.a.createElement(ee.a,{iconType:""+(e.ok>0?"colored":"bordered"),iconColor:"green",iconNumber:r.a.createElement("span",{id:"count-svc-ok"},J()(e.ok).format("0a"))})),r.a.createElement(te.a,{iconType:"arrow",ref:this.setWrapperRef,rotate:t,onClick:this.toggle}),r.a.createElement("div",{className:p()(g.a["submenu-toggle"],{[g.a["submenu-toggle-active"]]:t})},r.a.createElement(ae.a,null,r.a.createElement(L.Link,{to:"/main.php?p=20201&o=svc&statusFilter=&search=",className:g.a.link,onClick:this.toggle},r.a.createElement(ne.a,{submenuTitle:P.I18n.t("All"),submenuCount:J()(e.total).format()})),r.a.createElement(L.Link,{to:"/main.php?p=20201&o=svc_unhandled&statusFilter=critical&search=",className:g.a.link,onClick:this.toggle},r.a.createElement(ne.a,{dotColored:"red",submenuTitle:P.I18n.t("Critical"),submenuCount:`${J()(e.critical.unhandled).format()}/${J()(e.critical.total).format()}`})),r.a.createElement(L.Link,{to:"/main.php?p=20201&o=svc_unhandled&statusFilter=warning&search=",className:g.a.link,onClick:this.toggle},r.a.createElement(ne.a,{dotColored:"orange",submenuTitle:P.I18n.t("Warning"),submenuCount:`${J()(e.warning.unhandled).format()}/${J()(e.warning.total).format()}`})),r.a.createElement(L.Link,{to:"/main.php?p=20201&o=svc_unhandled&statusFilter=unknown&search=",className:g.a.link,onClick:this.toggle},r.a.createElement(ne.a,{dotColored:"gray",submenuTitle:P.I18n.t("Unknown"),submenuCount:`${J()(e.unknown.unhandled).format()}/${J()(e.unknown.total).format()}`})),r.a.createElement(L.Link,{to:"/main.php?p=20201&o=svc&statusFilter=ok&search=",className:g.a.link,onClick:this.toggle},r.a.createElement(ne.a,{dotColored:"green",submenuTitle:P.I18n.t("Ok"),submenuCount:J()(e.ok).format()})),r.a.createElement(L.Link,{to:"/main.php?p=20201&o=svc&statusFilter=pending&search=",className:g.a.link,onClick:this.toggle},r.a.createElement(ne.a,{dotColored:"blue",submenuTitle:P.I18n.t("Pending"),submenuCount:J()(e.pending).format()})))))):null}}var de=Object(s.connect)(({intervals:e})=>({refreshTime:!!e&&1e3*parseInt(e.AjaxTimeReloadMonitoring)}),{})(me);me.propTypes={refreshTime:A.a.oneOfType([A.a.number,A.a.bool]).isRequired};class ue extends n.Component{constructor(){super(...arguments),this.refreshIntervalsApi=C("internal.php?object=centreon_topcounter&action=refreshIntervals"),this.getRefreshIntervals=()=>{const{setRefreshIntervals:e}=this.props;this.refreshIntervalsApi.get().then(({data:t})=>{e(t)}).catch(e=>{console.log(e)})},this.componentDidMount=()=>{this.getRefreshIntervals()}}render(){return r.a.createElement("header",{className:g.a.header},r.a.createElement("div",{className:g.a["header-icons"]},r.a.createElement("div",{className:p()(g.a.wrap,g.a["wrap-left"])},r.a.createElement(G,null)),r.a.createElement("div",{className:p()(g.a.wrap,g.a["wrap-right"])},r.a.createElement(T,{path:"/header/topCounter"}),r.a.createElement(ie,null),r.a.createElement(de,null),r.a.createElement(K,null))))}}const pe={setRefreshIntervals:e=>({type:"@header/SET_REFRESH_INTERVALS",intervals:e})};var he=Object(s.connect)(()=>({}),pe)(ue),ge=a(46),be=a(689),fe=a(342),ve=a(765),Ee=a(288),_e=a(96),ye=a(52);function*we(){yield Object(ye.f)("@axios/GET_DATA",Ae)}function*ke(){yield Object(ye.f)("@axios/POST_DATA",Ae)}function*Se(){yield Object(ye.f)("@axios/PUT_DATA",Ae)}function*Oe(){yield Object(ye.f)("@axios/DELETE_DATA",Ae)}function*je(){yield Object(ye.f)("@axios/UPLOAD_DATA",Te)}function*Ce(){yield Object(ye.f)("@axios/RESET_UPLOAD_PROGRESS_DATA",Ie)}function*Ie(e){try{yield Object(ye.d)({type:"@axios/FILE_UPLOAD_PROGRESS",data:{reset:!0}}),e.resolve()}catch(t){e.reject(t)}}const xe=e=>{let t;const a=Object(Ee.c)(e=>(t=e,()=>{}));return[(({files:e,url:t},a)=>{const n=new FormData;for(const t of e)n.append("file[]",t);const r={onUploadProgress:a,withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}};return j.a.post(t,n,r)})(e,a=>{const{total:n,loaded:r}=a,s=Math.round(100*r/n);t({[e.fileIndex]:s}),100===s&&t(Ee.a)}),a]};function*Ne(e){for(;;){const t=yield Object(ye.e)(e);yield Object(ye.d)({type:"@axios/FILE_UPLOAD_PROGRESS",data:t})}}function*Te(e){try{let t={status:!1,result:{errors:[],successed:[]}};const a=yield Object(ye.a)(e.files.map((t,a)=>Object(ye.b)(De,Object.assign(Object.assign({},e),{files:[t],fileIndex:a}))));for(const e of a)e.result.errors&&(t={status:!0,result:Object.assign(Object.assign({},t.result),{errors:[...t.result.errors,...e.result.errors]})}),e.result.successed&&(t={status:!0,result:Object.assign(Object.assign({},t.result),{successed:[...t.result.successed,...e.result.successed]})});e.resolve(t)}catch(t){e.reject(t)}}function*De(e){const[t,a]=yield Object(ye.b)(xe,e);yield Object(ye.c)(Ne,a);try{const e=yield Object(ye.b)(()=>t);return yield e.data}catch(e){throw e}}function*Ae(e){try{if(!e.requestType)throw new Error("Request type is required!");{let t=null;t="DELETE"===e.requestType?e.data?{data:e.data}:null:e.data?e.data:null;const a=yield j.a[e.requestType.toLowerCase()](e.url,t||null),n=yield a.data,{propKey:r}=e;r&&(yield Object(ye.d)({type:"@axios/SET_AXIOS_DATA",data:n,propKey:r})),n?e.resolve(n):e.reject("No data in response")}}catch(t){e.reject(t)}}var Pe=function*(){yield Object(ye.a)([Object(ye.c)(we),Object(ye.c)(ke),Object(ye.c)(Se),Object(ye.c)(Oe),Object(ye.c)(je),Object(ye.c)(Ce)])},Le=a(1324);const Fe=e=>({type:"@poller/SET_POLLER_WIZARD_DATA",pollerData:e}),Re={};var ze=(e=Re,t)=>{switch(t.type){case"@poller/SET_POLLER_WIZARD_DATA":return Object.assign(Object.assign({},e),t.pollerData);default:return e}},Me=function(e,t,a,n){return new(a||(a=Promise))((function(r,s){function l(e){try{o(n.next(e))}catch(e){s(e)}}function i(e){try{o(n.throw(e))}catch(e){s(e)}}function o(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(l,i)}o((n=n.apply(e,t||[])).next())}))};const $e=()=>e=>Me(void 0,void 0,void 0,(function*(){e(Ge());try{const{data:t}=yield C("internal.php?object=centreon_topology&action=navigationList").get();e(Be(t.result))}catch(t){e(We(t))}})),Ge=()=>({type:"FETCH_NAVIGATION_BEGIN"}),Be=e=>({type:"FETCH_NAVIGATION_SUCCESS",items:e}),We=e=>({type:"FETCH_NAVIGATION_FAILURE",error:e}),qe={fetched:!1,items:[]};var Ue=(e=qe,t)=>{switch(t.type){case"FETCH_NAVIGATION_SUCCESS":return Object.assign(Object.assign({},e),{fetched:!0,items:t.items});case"@@router/LOCATION_CHANGE":const a=document.createEvent("CustomEvent");return a.initCustomEvent("react.href.update",!1,!1,{href:window.location.href}),window.dispatchEvent(a),e;default:return e}};const He={AjaxTimeReloadMonitoring:10};var Ve=(e=He,t)=>{switch(t.type){case"@header/SET_REFRESH_INTERVALS":return Object.assign(Object.assign({},e),t.intervals);default:return e}},Ke=function(e,t,a,n){return new(a||(a=Promise))((function(r,s){function l(e){try{o(n.next(e))}catch(e){s(e)}}function i(e){try{o(n.throw(e))}catch(e){s(e)}}function o(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(l,i)}o((n=n.apply(e,t||[])).next())}))};const Xe=()=>e=>Ke(void 0,void 0,void 0,(function*(){e(Qe());try{const{data:t}=yield C("internal.php?object=centreon_frontend_component&action=components").get();e(Je(t))}catch(t){e(Ye(t))}})),Qe=()=>({type:"FETCH_EXTERNAL_COMPONENTS_BEGIN"}),Je=e=>({type:"FETCH_EXTERNAL_COMPONENTS_SUCCESS",data:e}),Ye=e=>({type:"FETCH_EXTERNAL_COMPONENTS_FAILURE",error:e}),Ze={pages:{},hooks:{},fetched:!1};var et=(e=Ze,t)=>{switch(t.type){case"FETCH_EXTERNAL_COMPONENTS_SUCCESS":return Object.assign(Object.assign({},e),{pages:t.data.pages,hooks:t.data.hooks,fetched:!0});default:return e}};const tt={toggled:!1,label:"",x:0,y:0};var at=(e=tt,t)=>{const{data:a}=t;switch(t.type){case"@tooltip/UPDATE_TOOLTIP":return Object.assign(Object.assign({},e),a);default:return e}};const nt={fileUploadProgress:{}};var rt=(e=nt,t)=>{switch(t.type){case"@axios/SET_AXIOS_DATA":return Object.assign(Object.assign({},e),{[t.propKey]:t.data});case"@axios/FILE_UPLOAD_PROGRESS":return t.data.reset?Object.assign(Object.assign({},e),{fileUploadProgress:{}}):Object.assign(Object.assign({},e),{fileUploadProgress:Object.assign(Object.assign({},e.fileUploadProgress),t.data)});default:return e}};const st=Object(Ee.b)(),lt=Object(_e.a)({basename:document.baseURI.replace(window.location.origin,"")});var it=(e={})=>{const t=[Object(be.a)(lt),ve.a,fe.batchDispatchMiddleware,st],a=("object"==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):ge.d)(Object(ge.a)(...t)),n=Object(ge.e)((r=lt,Object(ge.c)({router:Object(l.b)(r),form:Le.a,pollerForm:ze,i18n:P.i18nReducer,navigation:Ue,remoteData:rt,intervals:Ve,externalComponents:et,tooltip:at})),e,a);var r;return st.run(Pe),n},ot=a(1399);const ct=(e,t)=>{if(!1===t.show)return e;for(const a of["groups","children"])if(t[a])return[...e,Object.assign(Object.assign({},t),{[a]:t[a].reduce(ct,[])})];return[...e,t]},mt=(e,t)=>t.children?[...e,Object.assign(Object.assign({},t),{children:t.children.reduce(mt,[])})]:t.groups?[...e,Object.assign(Object.assign({},t),{groups:t.groups.filter(dt)})]:[...e,t],dt=e=>{if(e.children)for(const t of e.children)if(!0===t.show)return!0;return!1},ut=Object(F.a)(e=>e.navigation.items,e=>e.reduce(ct,[]).reduce(mt,[])),pt=(e,t)=>{for(const a of["groups","children"])t[a]&&(e=t[a].reduce(pt,e));return!0===t.is_react&&(e[t.url]=t.page),e},ht=Object(F.a)(e=>e.navigation.items,e=>e.reduce(pt,{}));class gt extends n.Component{constructor(){super(...arguments),this.componentDidMount=()=>{const{fetchNavigationData:e}=this.props;e()}}render(){const{navigationData:e,reactRoutes:t}=this.props;return r.a.createElement(ot.a,{navigationData:e,reactRoutes:t})}}var bt=Object(s.connect)(e=>({navigationData:ut(e),reactRoutes:ht(e)}),e=>({fetchNavigationData:()=>{e($e())},updateTooltip:()=>{e(updateTooltip())}}))(gt),ft=a(472),vt=a.n(ft);var Et=Object(s.connect)(({tooltip:e})=>({x:e.x,y:e.y,label:e.label,toggled:e.toggled}),null)(({x:e,y:t,label:a,toggled:n})=>r.a.createElement("div",{className:p()(vt.a.tooltip,{[vt.a.hidden]:!n}),style:{top:t,left:e}},r.a.createElement(P.Translate,{value:a}))),_t=a(91),yt=a.n(_t);class wt extends n.Component{render(){return r.a.createElement("footer",{className:yt.a.footer},r.a.createElement("div",{className:yt.a["footer-wrap"]},r.a.createElement("div",{className:yt.a["footer-wrap-left"]}),r.a.createElement("div",{className:yt.a["footer-wrap-middle"]},r.a.createElement("ul",{className:p()(yt.a["list-unstyled"],yt.a["footer-list"])},r.a.createElement("li",{className:yt.a["footer-list-item"]},r.a.createElement("a",{href:"https://documentation.centreon.com/",target:"_blank",rel:"noopener noreferrer"},"Documentation")),r.a.createElement("li",{className:yt.a["footer-list-item"]},r.a.createElement("a",{href:"https://support.centreon.com",target:"_blank",rel:"noopener noreferrer"},"Centreon Support")),r.a.createElement("li",{className:yt.a["footer-list-item"]},r.a.createElement("a",{href:"https://www.centreon.com",target:"_blank",rel:"noopener noreferrer"},"Centreon")),r.a.createElement("li",{className:yt.a["footer-list-item"]},r.a.createElement("a",{href:"https://github.com/centreon/centreon.git",target:"_blank",rel:"noopener noreferrer"},"Github Project")),r.a.createElement("li",{className:yt.a["footer-list-item"]},r.a.createElement("a",{href:"https://centreon.github.io",target:"_blank",rel:"noopener noreferrer"},"Slack")))),r.a.createElement("div",{className:yt.a["footer-wrap-right"]},r.a.createElement("span",null,"Copyright © 2005 - 2020"))))}}var kt=wt,St=a(331),Ot=a.n(St),jt=a(790);var Ct={serverConfigurationWizard:"/poller-wizard/1",remoteServerStep1:"/poller-wizard/2",remoteServerStep2:"/poller-wizard/3",remoteServerStep3:"/poller-wizard/4",pollerStep1:"/poller-wizard/5",pollerStep2:"/poller-wizard/6",pollerStep3:"/poller-wizard/7",pollerList:"/main.php?p=60901",extensionsManagerPage:"/administration/extensions/manager",notAllowedPage:"/not-allowed",resources:"/monitoring/events"},It=a(1323),xt=a(1322),Nt=a(9),Tt=a.n(Nt);var Dt=e=>{if("string"==typeof e)return e;const{name:t,type:a,value:n,message:r}=e;if(r)return r;switch(a){case"required":return(t||"This field")+" is required";case"email":return"Please enter a valid email address";case"maxLength":return Array.isArray(n)?`${t||"Field"} must have at most ${e.maxLength} items`:`${t||"Field"} must be at most ${e.maxLength} characters long`;case"minLength":return Array.isArray(n)?`${t||"Field"} must have at least ${e.minLength} items`:`${t||"Field"} must be at least ${e.minLength} characters long`;case"invalidDate":return(t||"Field")+" is not valid";default:return`${t||"Field"} is invalid. Reason: ${e.reason}`}},At=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a};const Pt=e=>{var{className:t,children:a,isError:n,tagName:s}=e,l=At(e,["className","children","isError","tagName"]);return r.a.createElement(s,Object.assign({className:p()(Tt.a.field__msg,Tt.a[t],{[Tt.a["field__msg--error"]]:!!n})},l),a)};Pt.defaultProps={className:"",isError:!0,tagName:"div"};var Lt=Pt,Ft=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a};let Rt=0;var zt=e=>{class t extends n.Component{constructor(e){super(e),this.state={isFocused:!1},["getId","handleFocus","handleBlur","isInputValue","renderError"].map(e=>this[e]=this[e].bind(this))}getId(){const{name:e}=this.props.input;return this.fieldId||(this.fieldId=++Rt),`field-${e}-${this.fieldId}`}handleFocus(e){const{input:{onFocus:t}}=this.props;this.setState({isFocused:!0}),t&&t(e)}handleBlur(){const{input:{onBlur:e,value:t}}=this.props;if(this.setState({isFocused:!1}),e)return e(t)}isInputValue(e){return null!=e&&""!==e}renderError(){const{meta:{touched:e,error:t}}=this.props;return e&&t?r.a.createElement(Lt,null,Dt(t)):null}render(){const{isFocused:t}=this.state,a=this.props,{input:n,meta:s,label:l,autoComplete:i}=a,o=Ft(a,["input","meta","label","autoComplete"]),c="off"===i?{autoComplete:this.getId()}:{};return r.a.createElement(e,Object.assign({className:p()(Tt.a.field,{[Tt.a["has-danger"]]:s.invalid&&s.touched},{[Tt.a["has-value"]]:this.isInputValue(n.value)},{[Tt.a["has-focus"]]:t})},n,o,c,{label:l,onFocus:this.handleFocus,onBlur:this.handleBlur,id:this.getId(),error:this.renderError()}))}}return t.displayName=`FieldHoc(${e.displayName})`,t.propTypes={meta:A.a.object.isRequired,input:A.a.object.isRequired,label:A.a.string,onFocus:A.a.func,onBlur:A.a.func},t},Mt=a(766);const $t=a.n(Mt)()(["type","name","value","checked","disabled","id","placeholder","autoComplete","autoFocus","multiple","required","step","max","min","rows","pattern","maxlength","onFocus","onChange","onInput","onBlur","onClick","style","defaultValue","readonly"]);var Gt=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a};const Bt=e=>{var{type:t,label:a,placeholder:n,error:s,topRightLabel:l,modifiers:i,renderMeta:o}=e,c=Gt(e,["type","label","placeholder","error","topRightLabel","modifiers","renderMeta"]);return r.a.createElement("div",{className:p()(Tt.a["form-group"],{[Tt.a["has-danger"]]:!!s})},r.a.createElement("label",null,r.a.createElement("span",null,a),r.a.createElement("span",{className:p()(Tt.a["label-option"],Tt.a.required)},l||null)),r.a.createElement("input",Object.assign({type:t,placeholder:n,className:p()(Tt.a["form-control"],{[Tt.a["is-invalid"]]:!!s})},$t(c))),s?r.a.createElement("div",{className:Tt.a["invalid-feedback"]},s):null)};Bt.displayName="InputField",Bt.defaultProps={className:Tt.a["form-control"],modifiers:[],renderMeta:null},Bt.propTypes={error:A.a.element};var Wt=zt(Bt);const qt=e=>e?"":"The field is required",Ut=e=>{let t="";return t=!e||e.length<1?"The field is required":"",t},Ht=e=>{let t="";return t=!e||e.length<1?"The field is required":"",t};class Vt extends n.Component{render(){const{error:e,handleSubmit:t,onSubmit:a}=this.props;return r.a.createElement("div",{className:Tt.a["form-wrapper"]},r.a.createElement("div",{className:Tt.a["form-inner"]},r.a.createElement("div",{className:Tt.a["form-heading"]},r.a.createElement("h2",{className:Tt.a["form-title"]},r.a.createElement(P.Translate,{value:"Server Configuration"}))),r.a.createElement("form",{autoComplete:"off",onSubmit:t(a)},r.a.createElement(It.a,{name:"server_name",component:Wt,type:"text",placeholder:"",label:P.I18n.t("Server Name")+":"}),r.a.createElement(It.a,{name:"server_ip",component:Wt,type:"text",placeholder:"",label:P.I18n.t("Server IP address")+":"}),r.a.createElement(It.a,{name:"centreon_central_ip",component:Wt,type:"text",placeholder:"",label:P.I18n.t("Centreon Central IP address, as seen by this server")+":"}),r.a.createElement("div",{className:Tt.a["form-buttons"]},r.a.createElement("button",{className:Tt.a.button,type:"submit"},r.a.createElement(P.Translate,{value:"Next"}))),e?r.a.createElement("div",{className:Tt.a["error-block"]},e.message):null)))}}var Kt=Object(xt.a)({form:"PollerFormStepOne",validate:e=>({server_name:P.I18n.t(qt(e.server_name)),server_ip:P.I18n.t(Ut(e.server_ip)),centreon_central_ip:P.I18n.t(Ht(e.centreon_central_ip))}),warn:()=>{},enableReinitialize:!0,destroyOnUnmount:!1,keepDirtyOnReinitialize:!0})(Vt),Xt=a(176),Qt=a.n(Xt);class Jt extends n.Component{constructor(){super(...arguments),this.goToPath=e=>{lt.push(e)}}render(){const{links:e}=this.props;return r.a.createElement("div",{className:Qt.a["progress-bar"]},r.a.createElement("div",{className:Qt.a["progress-bar-wrapper"]},r.a.createElement("ul",{className:Qt.a["progress-bar-items"]},e?e.map(e=>r.a.createElement("li",{key:e.path,className:Qt.a["progress-bar-item"],onClick:this.goToPath.bind(this,e.path)},r.a.createElement("span",{className:p()(Qt.a["progress-bar-link"],{[Qt.a.active]:e.active},{[Qt.a.prev]:e.prevActive})},e.number))):null)))}}var Yt=Object(s.connect)(()=>({}),{})(Jt),Zt=a(97);const ea=Object(Zt.a)(e=>({page:{backgroundColor:e.palette.common.white,padding:e.spacing(2,0)}}));var ta=({children:e})=>{const t=ea();return n.createElement("div",{className:t.page},e)};class aa extends n.Component{constructor(){super(...arguments),this.links=[{active:!0,prevActive:!0,number:1,path:Ct.serverConfigurationWizard},{active:!0,number:2,path:Ct.pollerStep1},{active:!1,number:3},{active:!1,number:4}],this.state={error:null},this.handleSubmit=e=>{const{history:t,setPollerWizard:a}=this.props;a(e),t.push(Ct.pollerStep2)}}render(){const{links:e}=this;return r.a.createElement(ta,null,r.a.createElement(Yt,{links:e}),r.a.createElement(Kt,{onSubmit:this.handleSubmit.bind(this),initialValues:{}}))}}const na={setPollerWizard:Fe};var ra=Object(s.connect)(({pollerForm:e})=>({pollerData:e}),na)(aa),sa=a(489),la=a(373),ia=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a};const oa=(e,t)=>{if("string"==typeof e)return r.a.createElement("option",{key:t,value:e},e);if(e.subOptions){const{subOptions:a,text:n,value:s}=e,l=ia(e,["subOptions","text","value"]);return r.a.createElement("optgroup",Object.assign({key:"optgroup-"+t,label:n,value:s},l),a.map((e,a)=>oa(e,`${t}-${a}`)))}const{text:a,value:n}=e,s=ia(e,["text","value"]);return r.a.createElement("option",Object.assign({key:t,value:n},s),a)},ca=e=>{var{className:t,defaultOption:a,error:n,label:s,modifiers:l,options:i,styleOverride:o,topRightLabel:c}=e,m=ia(e,["className","defaultOption","error","label","modifiers","options","styleOverride","topRightLabel"]);const[d,u,h]=a||[null,"",!0];return r.a.createElement("div",{className:p()(Tt.a["form-group"],Tt.a.select),style:o},s?r.a.createElement("label",null,r.a.createElement("span",null,s),r.a.createElement("span",{className:p()(Tt.a["label-option"],Tt.a.optional)},c||null)):null,r.a.createElement("select",Object.assign({className:p()(Tt.a["form-control"],Tt.a["custom-select"])},$t(m)),!1!==a?r.a.createElement("option",{value:d,disabled:h},u):null,i.map(oa)),n&&"Required"===c?r.a.createElement("div",{className:Tt.a["invalid-feedback"]},n):null)};ca.displayName="SelectField",ca.propTypes={options:A.a.array,defaultOption:A.a.oneOfType([A.a.array,A.a.bool]),error:A.a.element},ca.defaultProps={className:Tt.a.field,styleOverride:{},defaultOption:!1,modifiers:[],options:[]};var ma=zt(ca),da=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a};const ua=(e,t,a)=>n=>a(n.target.checked?e:t),pa=e=>{var{checked:t,className:a,error:n,falseValue:s,fieldMsg:l,label:i,onBlur:o,onChange:c,trueValue:m,value:d,info:u}=e,h=da(e,["checked","className","error","falseValue","fieldMsg","label","onBlur","onChange","trueValue","value","info"]);return r.a.createElement("div",{className:p()(Tt.a["form-group"],{[Tt.a["has-danger"]]:!!n})},r.a.createElement("div",{className:p()(Tt.a["custom-control"],Tt.a["custom-checkbox orange"])},r.a.createElement("input",Object.assign({},$t(h),{"aria-checked":t,checked:d,defaultChecked:d===m,onChange:c&&ua(m,s,c),onBlur:o&&ua(m,s,o),className:Tt.a["custom-control-input"],type:"checkbox"})),r.a.createElement("label",{htmlFor:h.id,className:Tt.a["custom-control-label"]},i,u)),n?r.a.createElement("div",{className:Tt.a["invalid-feedback"]},r.a.createElement("div",{className:p()(Tt.a.field__msg,Tt.a["field__msg--error"])},n)):null)};pa.displayName="CheckboxField",pa.propTypes={id:A.a.string.isRequired,label:A.a.string,className:A.a.string,value:A.a.bool,trueValue:A.a.any,falseValue:A.a.any,error:A.a.element},pa.defaultProps={className:Tt.a.field,trueValue:!0,falseValue:!1};var ha=zt(pa);class ga extends n.Component{constructor(){super(...arguments),this.state={selectedMaster:null,selectedAdditionals:[]},this.getAvailableAdditionals=()=>{const{pollers:e}=this.props,{selectedMaster:t}=this.state;return e.filter(e=>{if(e.id!==t)return!0})},this.handleChangeMaster=(e,t)=>{const{change:a}=this.props,{selectedAdditionals:n}=this.state,r=t?n.filter(e=>{if(e.value!==t)return!0}):[];a("linked_remote_slaves",r),this.setState({selectedMaster:t,selectedAdditionals:r})},this.handleChangeAdditionals=(e,t)=>{this.setState({selectedAdditionals:t})}}render(){const{error:e,handleSubmit:t,onSubmit:a,pollers:n}=this.props,{selectedMaster:s}=this.state,l=this.getAvailableAdditionals();return r.a.createElement("div",{className:Tt.a["form-wrapper"]},r.a.createElement("div",{className:Tt.a["form-inner"]},r.a.createElement("form",{autoComplete:"off",onSubmit:t(a)},n.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:Tt.a["form-title"]},r.a.createElement(P.Translate,{value:"Attach poller to a master remote server"})),r.a.createElement(It.a,{name:"linked_remote_master",component:ma,options:[{text:"",value:null}].concat(n.map(e=>({value:e.id,label:e.name,text:e.name}))),value:s,onChange:this.handleChangeMaster})):null,s&&n.length>=2?r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:Tt.a["form-title"]},r.a.createElement(P.Translate,{value:"Attach poller to additional remote servers"})),r.a.createElement("div",{className:Tt.a["form-item"]},r.a.createElement(It.a,{name:"linked_remote_slaves",component:zt(la.a),options:l.map(e=>({value:e.id,label:e.name})),isMulti:!0,onChange:this.handleChangeAdditionals}))):null,r.a.createElement(It.a,{name:"open_broker_flow",component:ha,label:P.I18n.t("Advanced: reverse Centreon Broker communication flow"),defaultValue:!1}),r.a.createElement("div",{className:Tt.a["form-buttons"]},r.a.createElement("button",{className:Tt.a.button,type:"submit"},r.a.createElement(P.Translate,{value:"Apply"}))),e?r.a.createElement("div",{className:Tt.a["error-block"]},e.message):null)))}}var ba=Object(xt.a)({form:"PollerFormStepTwo",validate:()=>({}),warn:()=>{},enableReinitialize:!0,destroyOnUnmount:!1,keepDirtyOnReinitialize:!0})(ga);class fa extends n.Component{constructor(){super(...arguments),this.state={pollers:[]},this.links=[{active:!0,prevActive:!0,number:1,path:Ct.serverConfigurationWizard},{active:!0,prevActive:!0,number:2,path:Ct.pollerStep1},{active:!0,number:3},{active:!1,number:4}],this.pollerListApi=C("internal.php?object=centreon_configuration_remote&action=getRemotesList"),this.wizardFormApi=C("internal.php?object=centreon_configuration_remote&action=linkCentreonRemoteServer"),this.getPollers=()=>{this.pollerListApi.post().then(e=>{this.setState({pollers:e.data})})},this.componentDidMount=()=>{this.getPollers()},this.handleSubmit=e=>{const{history:t,pollerData:a,setPollerWizard:n}=this.props,r=Object.assign(Object.assign({},e),a);return r.server_type="poller",this.wizardFormApi.post("",r).then(e=>{n({submitStatus:e.data.success}),a.linked_remote_master?t.push(Ct.pollerStep3):t.push(Ct.pollerList)}).catch(e=>{throw new sa.a({_error:new Error(e.response.data)})})}}render(){const{links:e}=this,{pollerData:t}=this.props,{pollers:a}=this.state;return r.a.createElement(ta,null,r.a.createElement(Yt,{links:e}),r.a.createElement(ba,{pollers:a,initialValues:t,onSubmit:this.handleSubmit.bind(this)}))}}const va={setPollerWizard:Fe};var Ea=Object(s.connect)(({pollerForm:e})=>({pollerData:e}),va)(fa),_a=a(350),ya=a.n(_a),wa=a(284),ka=a.n(wa);class Sa extends n.Component{render(){return r.a.createElement("div",{className:ka.a.loader},r.a.createElement("div",{className:p()(ka.a["loader-inner"],ya.a["ball-grid-pulse"])},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)))}}var Oa=Sa,ja=({formTitle:e,statusCreating:t,statusGenerating:a,statusProcessing:n,error:s})=>r.a.createElement("div",{className:p()(Tt.a["form-wrapper"],Tt.a.installation)},r.a.createElement("div",{className:Tt.a["form-inner"]},r.a.createElement("div",{className:Tt.a["form-heading"]},r.a.createElement("h2",{className:Tt.a["form-title"]},e)),!s&&r.a.createElement(Oa,null),r.a.createElement("p",{className:Tt.a["form-text"]},r.a.createElement(P.Translate,{value:"Creating Export Task"}),r.a.createElement("span",{className:p()(Tt.a["form-status"],Tt.a[t?"valid":"failed"])},null!=t?r.a.createElement("span",null,t?"[OK]":"[FAIL]"):"...")),r.a.createElement("p",{className:Tt.a["form-text"]},r.a.createElement(P.Translate,{value:"Generating Export Files"}),r.a.createElement("span",{className:p()(Tt.a["form-status"],Tt.a[a?"valid":"failed"])},null!=a?r.a.createElement("span",null,a?"[OK]":"[FAIL]"):"...")),r.a.createElement("p",{className:Tt.a["form-text"]},r.a.createElement(P.Translate,{value:"Processing Remote Import/Configuration"}),r.a.createElement("span",{className:p()(Tt.a["form-status"],Tt.a[n?"valid":"failed"])},null!=n?r.a.createElement("span",null,n?"[OK]":"[FAIL]"):"...")),s?r.a.createElement("span",{className:Tt.a["form-error-message"]},s):null));class Ca extends n.Component{constructor(){super(...arguments),this.state={generateStatus:null,processingStatus:null},this.links=[{active:!0,prevActive:!0,number:1},{active:!0,prevActive:!0,number:2},{active:!0,prevActive:!0,number:3},{active:!0,number:4}]}render(){const{links:e}=this,{pollerData:t}=this.props,{generateStatus:a,processingStatus:n}=this.state;return r.a.createElement(ta,null,r.a.createElement(Yt,{links:e}),r.a.createElement(ja,{statusCreating:t.submitStatus,statusGenerating:a,statusProcessing:n,formTitle:P.I18n.t("Finalizing Setup")+":"}))}}var Ia=Object(s.connect)(({pollerForm:e})=>({pollerData:e}),{})(Ca),xa=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a};const Na=e=>{var{checked:t,error:a,label:n,info:s,className:l}=e,i=xa(e,["checked","error","label","info","className"]);return r.a.createElement("div",{className:p()(Tt.a["custom-control"],Tt.a["custom-radio"],Tt.a["form-group"])},r.a.createElement("input",Object.assign({className:Tt.a["form-check-input"],type:"radio",checked:t,"aria-checked":t,info:!0},$t(i))),r.a.createElement("label",{htmlFor:i.id,className:Tt.a["custom-control-label"]},n,s),a?r.a.createElement("div",{className:Tt.a["invalid-feedback"]},r.a.createElement("div",{className:p()(Tt.a.field__msg,Tt.a["field__msg--error"])},a)):null)};Na.displayName="RadioField",Na.defaultProps={className:Tt.a.field};var Ta=zt(Na);class Da extends n.Component{constructor(){super(...arguments),this.state={inputTypeManual:!0,initialized:!1},this.initializeFromRest=e=>{this.props.change("inputTypeManual",!e),this.setState({initialized:!0,inputTypeManual:!e})},this.UNSAFE_componentWillReceiveProps=e=>{const{waitList:t}=e,{initialized:a}=this.state;t&&!a&&this.initializeFromRest(t.length>0),this.setState({initialized:!0,centreon_folder:"/centreon/"})}}onManualInputChanged(e){this.setState({inputTypeManual:e})}render(){const{error:e,handleSubmit:t,onSubmit:a,waitList:n}=this.props,{inputTypeManual:s}=this.state;return r.a.createElement("div",{className:Tt.a["form-wrapper"]},r.a.createElement("div",{className:Tt.a["form-inner"]},r.a.createElement("div",{className:Tt.a["form-heading"]},r.a.createElement("h2",{className:p()(Tt.a["form-title"],Tt.a["mb-2"])},r.a.createElement(P.Translate,{value:"Remote Server Configuration"}))),r.a.createElement("form",{autoComplete:"off",onSubmit:t(a)},r.a.createElement(It.a,{name:"inputTypeManual",onChange:()=>{this.onManualInputChanged(!0)},checked:s,component:Ta,label:P.I18n.t("Create new Remote Server")}),s?r.a.createElement("div",null,r.a.createElement(It.a,{name:"server_name",component:Wt,type:"text",placeholder:"",label:P.I18n.t("Server Name")+":"}),r.a.createElement(It.a,{name:"server_ip",component:Wt,type:"text",placeholder:"",label:P.I18n.t("Server IP address")+":"}),r.a.createElement(It.a,{name:"db_user",component:Wt,type:"text",placeholder:"",label:P.I18n.t("Database username")+":"}),r.a.createElement(It.a,{name:"db_password",component:Wt,type:"password",placeholder:"",label:P.I18n.t("Database password")+":"}),r.a.createElement(It.a,{name:"centreon_central_ip",component:Wt,type:"text",placeholder:"",label:P.I18n.t("Centreon Central IP address, as seen by this server")+":"}),r.a.createElement(It.a,{name:"centreon_folder",component:Wt,type:"text",placeholder:"/centreon/",label:P.I18n.t("Centreon Web Folder on Remote")+":"}),r.a.createElement(It.a,{name:"no_check_certificate",component:ha,label:P.I18n.t("Do not check SSL certificate validation")}),r.a.createElement(It.a,{name:"no_proxy",component:ha,label:P.I18n.t("Do not use configured proxy to connect to this server")})):null,r.a.createElement(It.a,{name:"inputTypeManual",onClick:()=>{this.onManualInputChanged(!1)},checked:!s,component:Ta,label:P.I18n.t("Select a Remote Server")+":"}),s?null:r.a.createElement("div",null,n?r.a.createElement(It.a,{name:"server_ip",component:ma,label:P.I18n.t("Select Pending Remote Links")+":",required:!0,options:[{disabled:!0,selected:!0,text:P.I18n.t("Select IP"),value:""}].concat(n.map(e=>({value:e.id,text:e.ip})))}):null,r.a.createElement(It.a,{name:"server_name",component:Wt,type:"text",placeholder:"",label:P.I18n.t("Server Name")+":"}),r.a.createElement(It.a,{name:"db_user",component:Wt,type:"text",placeholder:"",label:P.I18n.t("Database username")+":"}),r.a.createElement(It.a,{name:"db_password",component:Wt,type:"password",placeholder:"",label:P.I18n.t("Database password")+":"}),r.a.createElement(It.a,{name:"centreon_central_ip",component:Wt,type:"text",placeholder:"",label:P.I18n.t("Centreon Central IP address, as seen by this server")+":"}),r.a.createElement(It.a,{name:"centreon_folder",component:Wt,type:"text",placeholder:"/centreon/",label:P.I18n.t("Centreon Web Folder on Remote")+":"}),r.a.createElement(It.a,{name:"no_check_certificate",component:ha,label:P.I18n.t("Do not check SSL certificate validation")}),r.a.createElement(It.a,{name:"no_proxy",component:ha,label:P.I18n.t("Do not use configured proxy to connect to this server")})),r.a.createElement("div",{className:Tt.a["form-buttons"]},r.a.createElement("button",{className:Tt.a.button,type:"submit"},r.a.createElement(P.Translate,{value:"Next"}))),e?r.a.createElement("div",{className:Tt.a["error-block"]},e.message):null)))}}var Aa=Object(xt.a)({form:"RemoteServerFormStepOne",validate:({server_name:e,server_ip:t,centreon_central_ip:a,db_user:n,db_password:r,centreon_folder:s})=>{return{server_name:P.I18n.t(qt(e)),server_ip:P.I18n.t(Ut(t)),centreon_central_ip:P.I18n.t(Ht(a)),db_user:P.I18n.t((o=n,o?"":"The field is required")),db_password:P.I18n.t((i=r,i?"":"The field is required")),centreon_folder:P.I18n.t((l=s,!l||l.length<1?"The field is required":""))};var l,i,o},warn:()=>{},enableReinitialize:!0,destroyOnUnmount:!1,keepDirtyOnReinitialize:!0})(Da);class Pa extends n.Component{constructor(){super(...arguments),this.links=[{active:!0,prevActive:!0,number:1,path:Ct.serverConfigurationWizard},{active:!0,number:2,path:Ct.remoteServerStep1},{active:!1,number:3},{active:!1,number:4}],this.state={waitList:null},this.wizardFormWaitListApi=C("internal.php?object=centreon_configuration_remote&action=getWaitList"),this.getWaitList=()=>{this.wizardFormWaitListApi.post().then(e=>{this.setState({waitList:e.data})}).catch(()=>{this.setState({waitList:[]})})},this.componentDidMount=()=>{this.getWaitList()},this.handleSubmit=e=>{const{history:t,setPollerWizard:a}=this.props;a(e),t.push(Ct.remoteServerStep2)}}render(){const{links:e}=this,{pollerData:t}=this.props,{waitList:a}=this.state;return r.a.createElement(ta,null,r.a.createElement(Yt,{links:e}),r.a.createElement(Aa,{waitList:a,initialValues:Object.assign(Object.assign({},t),{centreon_folder:"/centreon/"}),onSubmit:this.handleSubmit.bind(this)}))}}const La={setPollerWizard:Fe};var Fa=Object(s.connect)(({pollerForm:e})=>({pollerData:e}),La)(Pa);class Ra extends n.Component{constructor(){super(...arguments),this.state={value:[]},this.handleChange=(e,t)=>{this.setState({value:t})}}render(){const{error:e,handleSubmit:t,onSubmit:a,pollers:n}=this.props,{value:s}=this.state;return r.a.createElement("div",{className:Tt.a["form-wrapper"]},r.a.createElement("div",{className:Tt.a["form-inner"]},r.a.createElement("div",{className:Tt.a["form-heading"]},r.a.createElement("h2",{className:Tt.a["form-title"]},r.a.createElement(P.Translate,{value:"Select pollers to be attached to this new Remote Server"}))),r.a.createElement("form",{autoComplete:"off",onSubmit:t(a)},n?r.a.createElement(It.a,{name:"linked_pollers",component:zt(la.a),label:P.I18n.t("Select linked Remote Server")+":",options:n.items.map(e=>({value:e.id,label:e.text})),value:s,onChange:this.handleChange,multi:!0,isMulti:!0}):null,r.a.createElement("div",{className:Tt.a["form-buttons"]},r.a.createElement("button",{className:Tt.a.button,type:"submit"},r.a.createElement(P.Translate,{value:"Apply"}))),e?r.a.createElement("div",{className:Tt.a["error-block"]},e.message):null)))}}var za=Object(xt.a)({form:"RemoteServerFormStepTwo",validate:()=>({}),warn:()=>{},enableReinitialize:!0,destroyOnUnmount:!1,keepDirtyOnReinitialize:!0})(Ra);class Ma extends n.Component{constructor(){super(...arguments),this.state={pollers:null},this.links=[{active:!0,prevActive:!0,number:1,path:Ct.serverConfigurationWizard},{active:!0,prevActive:!0,number:2,path:Ct.remoteServerStep1},{active:!0,number:3},{active:!1,number:4}],this.pollerListApi=C("internal.php?object=centreon_configuration_poller&action=list"),this.wizardFormApi=C("internal.php?object=centreon_configuration_remote&action=linkCentreonRemoteServer"),this._spliceOutDefaultPoller=e=>{for(let t=0;t<e.items.length;t++)"1"===e.items[t].id&&e.items.splice(t,1);return e},this._filterOutDefaultPoller=(e,t)=>{t(this._spliceOutDefaultPoller(e))},this.getPollers=()=>{this.pollerListApi.get().then(e=>{this._filterOutDefaultPoller(e.data,e=>{this.setState({pollers:e})})})},this.componentDidMount=()=>{this.getPollers()},this.handleSubmit=e=>{const{history:t,pollerData:a,setPollerWizard:n}=this.props,r=Object.assign(Object.assign({},e),a);return r.server_type="remote",this.wizardFormApi.post("",r).then(e=>{e.data.success&&e.data.task_id?(n({submitStatus:e.data.success,taskId:e.data.task_id}),t.push(Ct.remoteServerStep3)):t.push(Ct.pollerList)}).catch(e=>{throw new sa.a({_error:new Error(e.response.data)})})}}render(){const{links:e}=this,{pollers:t}=this.state;return r.a.createElement(ta,null,r.a.createElement(Yt,{links:e}),r.a.createElement(za,{pollers:t,onSubmit:this.handleSubmit}))}}const $a={setPollerWizard:Fe};var Ga=Object(s.connect)(({pollerForm:e})=>({pollerData:e}),$a)(Ma);class Ba extends n.Component{constructor(){super(...arguments),this.state={generateStatus:null,processingStatus:null,error:null},this.links=[{active:!0,prevActive:!0,number:1},{active:!0,prevActive:!0,number:2},{active:!0,prevActive:!0,number:3},{active:!0,number:4}],this.generationTimeout=null,this.remainingGenerationTimeout=30,this.processingTimeout=null,this.remainingProcessingTimeout=30,this.getExportTask=()=>C("internal.php?object=centreon_task_service&action=getTaskStatus"),this.getImportTask=()=>C("internal.php?object=centreon_task_service&action=getRemoteTaskStatusByParent"),this.componentDidMount=()=>{this.setGenerationTimeout()},this.setGenerationTimeout=()=>{this.remainingGenerationTimeout>0?(this.remainingGenerationTimeout--,this.generationTimeout=setTimeout(this.refreshGeneration,1e3)):this.setState({generateStatus:!1,error:"Export generation timeout"})},this.setProcessingTimeout=()=>{this.remainingProcessingTimeout>0?(this.remainingProcessingTimeout--,this.processingTimeout=setTimeout(this.refreshProcession,1e3)):this.setState({processingStatus:!1,error:"Remote server processing timeout"})},this.refreshGeneration=()=>{const{taskId:e}=this.props.pollerData;this.getExportTask().post("",{task_id:e}).then(e=>{!0!==e.data.success?this.setState({generateStatus:!1,error:JSON.stringify(e.data)}):"completed"===e.data.status?this.setState({generateStatus:!0},()=>{this.setProcessingTimeout()}):this.setGenerationTimeout()}).catch(e=>{this.setState({generateStatus:!1,error:JSON.stringify(e.response.data)})})},this.refreshProcession=()=>{const{history:e}=this.props,{server_ip:t,centreon_folder:a,taskId:n}=this.props.pollerData;this.getImportTask().post("",{server_ip:t,centreon_folder:a,parent_id:n}).then(t=>{!0!==t.data.success?this.setState({generateStatus:!1,error:JSON.stringify(t.data)}):"completed"===t.data.status?this.setState({processingStatus:!0},()=>{setTimeout(()=>{e.push(Ct.pollerList)},2e3)}):this.setProcessingTimeout()}).catch(e=>{this.setState({processingStatus:!1,error:JSON.stringify(e.response.data)})})}}render(){const{links:e}=this,{pollerData:t}=this.props,{generateStatus:a,processingStatus:n,error:s}=this.state;return r.a.createElement(ta,null,r.a.createElement(Yt,{links:e}),r.a.createElement(ja,{statusCreating:t.submitStatus,statusGenerating:a,statusProcessing:n,formTitle:P.I18n.t("Finalizing Setup")+":",error:s}))}}var Wa=Object(s.connect)(({pollerForm:e})=>({pollerData:e}),{})(Ba),qa=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a};const Ua=e=>{var{checked:t,error:a,label:n,info:s,className:l}=e,i=qa(e,["checked","error","label","info","className"]);return r.a.createElement("div",{className:p()(Tt.a["custom-control"],Tt.a["custom-radio"],Tt.a["form-group"])},r.a.createElement("input",Object.assign({className:Tt.a["form-check-input"],type:"radio","aria-checked":t,info:!0},$t(i))),r.a.createElement("label",{htmlFor:i.id,className:Tt.a["custom-control-label"]},n,s),a?r.a.createElement("div",{className:Tt.a["invalid-feedback"]},r.a.createElement("div",{className:p()(Tt.a.field__msg,Tt.a["field__msg--error"])},a)):null)};Ua.displayName="RadioField",Ua.defaultProps={className:Tt.a.field};var Ha=zt(Ua),Va=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a};const Ka=e=>e.value?e.value:e,Xa=e=>e.label?e.label:e,Qa=e=>e.info?e.info:null,Ja=e=>{var{options:t,className:a,label:n,meta:s}=e,l=Va(e,["options","className","label","meta"]);const{error:i,touched:o}=s,c=Va(s,["error","touched"]);return r.a.createElement("div",{className:Tt.a["form-group"]},((e,t)=>e.map((e,a)=>r.a.createElement(Ha,Object.assign({key:a},t,{value:Ka(e),label:P.I18n.t(Xa(e)),info:Qa(e),checked:Ka(e)===t.input.value,className:Tt.a["radio-group-field__radio"]}))))(t,Object.assign(Object.assign({},l),{meta:Object.assign({},c)})),o&&i?r.a.createElement(Lt,null,i):null)};Ja.displayName="RadioGroupField",Ja.propTypes={options:A.a.array.isRequired},Ja.defaultProps={className:Tt.a["radio-group-field"]};var Ya=Ja;const Za=[{label:"Add a Centreon Remote Server",value:1},{label:"Add a Centreon Poller",value:2}];var en=Object(xt.a)({form:"ServerConfigurationWizardForm",validate:()=>({})})(({error:e,handleSubmit:t,onSubmit:a})=>r.a.createElement("div",{className:p()(Tt.a["form-wrapper"],Tt.a.small)},r.a.createElement("div",{className:Tt.a["form-inner"]},r.a.createElement("div",{className:Tt.a["form-heading"]},r.a.createElement("h2",{className:Tt.a["form-title"]},r.a.createElement(P.Translate,{value:"Server Configuration Wizard"})),r.a.createElement("p",{className:Tt.a["form-text"]},r.a.createElement(P.Translate,{value:"Choose a server type"})," :")),r.a.createElement("form",{autoComplete:"off",onSubmit:t(a)},r.a.createElement(It.a,{name:"server_type",component:Ya,options:Za}),r.a.createElement("div",{className:Tt.a["form-buttons"]},r.a.createElement("button",{className:Tt.a.button,type:"submit"},r.a.createElement(P.Translate,{value:"Next"}))),e?r.a.createElement("div",{className:Tt.a["error-block"]},e.message):null))));class tn extends n.Component{constructor(){super(...arguments),this.links=[{active:!0,number:1,path:Ct.serverConfigurationWizard},{active:!1,number:2},{active:!1,number:3},{active:!1,number:4}],this.handleSubmit=({server_type:e})=>{const{history:t}=this.props;"1"===e&&t.push(Ct.remoteServerStep1),"2"===e&&t.push(Ct.pollerStep1)}}render(){const{links:e}=this;return r.a.createElement(ta,null,r.a.createElement(Yt,{links:e}),r.a.createElement(en,{onSubmit:this.handleSubmit.bind(this)}))}}var an=tn,nn=a(1402),rn=a(351),sn=a(135),ln=a(1400),on=a(1397),cn=a(1409);class mn extends n.Component{constructor(){super(...arguments),this.state={extensions:{module:{entities:[]},widget:{entities:[]}},widgetsActive:!1,modulesActive:!1,modalDetailsActive:!1,modalDetailsLoading:!1,modalDetailsType:"module",not_installed:!1,installed:!1,updated:!1,search:"",deleteToggled:!1,deletingEntity:!1,extensionsUpdatingStatus:{},extensionsInstallingStatus:{},extensionDetails:!1},this.componentDidMount=()=>{this.getData()},this.onChange=(e,t)=>{const{filters:a}=this.state,n={};void 0!==this.state[t]&&(n[t]=e),this.setState(Object.assign(Object.assign({},n),{filters:Object.assign(Object.assign({},a),{[t]:e})}),this.getData)},this.clearFilters=()=>{this.setState({widgetsActive:!1,modulesActive:!1,not_installed:!1,installed:!1,updated:!1,nothingShown:!1,search:""},this.getData)},this.getEntitiesByKeyAndVersionParam=(e,t,a,n)=>{const{extensions:r}=this.state,s=[];if(r){const{status:n,result:l}=r;if(n)for(let n=0;n<l[a].entities.length;n++){const r=l[a].entities[n];r.version[e]===t&&s.push({id:r.id,type:a})}}n(s)},this.getAllEntitiesByVersionParam=(e,t,a)=>{const{modulesActive:n,widgetsActive:r}=this.state;!n&&!r||n&&r?this.getEntitiesByKeyAndVersionParam(e,t,"module",n=>{this.getEntitiesByKeyAndVersionParam(e,t,"widget",e=>{a&&a([...n,...e])})}):n?this.getEntitiesByKeyAndVersionParam(e,t,"module",e=>{a&&a([...e])}):r&&this.getEntitiesByKeyAndVersionParam(e,t,"widget",e=>{a&&a([...e])})},this.runActionOnAllEntities=(e,t,a)=>{this.getAllEntitiesByVersionParam(e,t,t=>{this.setStatusesByIds(t,a,()=>{"outdated"===e?this.updateOneByOne(t):"installed"===e&&this.installOneByOne(t)})})},this.reloadNavigation=()=>{const{reloadNavigation:e}=this.props;e()},this.reloadExternalComponents=()=>{const{reloadExternalComponents:e}=this.props;e()},this.setStatusesByIds=(e,t,a)=>{let n=this.state[t];for(const{id:t}of e)n=Object.assign(Object.assign({},n),{[t]:!0});this.setState({[t]:n},a)},this.updateOneByOne=e=>{if(e.length>0){const t=e.shift();this.updateById(t.id,t.type,()=>{this.updateOneByOne(e)})}},this.installOneByOne=e=>{if(e.length>0){const t=e.shift();this.installById(t.id,t.type,()=>{this.installOneByOne(e)})}},this.setStatusByKey=(e,t,a)=>{this.setState({[e]:Object.assign(Object.assign({},this.state[e]),{[t]:!1})},()=>{a&&"function"==typeof a&&a()})},this.runAction=(e,t,a,n,r)=>{this.setStatusesByIds([{id:a}],e,()=>{C(`internal.php?object=centreon_module&action=${t}&id=${a}&type=${n}`).post().then(()=>{this.getData(()=>{this.setStatusByKey(e,a,r),this.reloadNavigation()})}).catch(t=>{throw this.getData(()=>{this.setStatusByKey(e,a,r),this.reloadNavigation()}),t})})},this.installById=(e,t,a)=>{const{modalDetailsActive:n}=this.state;n?(this.setState({modalDetailsLoading:!0}),this.runAction("extensionsInstallingStatus","install",e,t,()=>{this.getExtensionDetails(e,t)})):this.runAction("extensionsInstallingStatus","install",e,t,a)},this.updateById=(e,t,a)=>{const{modalDetailsActive:n}=this.state;n?(this.setState({modalDetailsLoading:!0}),this.runAction("extensionsUpdatingStatus","update",e,t,()=>{this.getExtensionDetails(e,t)})):this.runAction("extensionsUpdatingStatus","update",e,t,a)},this.deleteById=(e,t)=>{const{modalDetailsActive:a}=this.state;this.setState({deleteToggled:!1,deletingEntity:!1,modalDetailsLoading:a},()=>{C("internal.php?object=centreon_module&action=remove").delete("",{params:{id:e,type:t}}).then(()=>{this.getData(),this.reloadNavigation(),a&&this.getExtensionDetails(e,t)})})},this.toggleDeleteModal=(e,t)=>{const{deleteToggled:a}=this.state;this.setState({deletingEntity:!!e&&Object.assign(Object.assign({},e),{type:t}),deleteToggled:!a})},this.getParsedGETParamsForExtensions=e=>{const{installed:t,not_installed:a,updated:n,search:r}=this.state;let s="";r&&(s+="&search="+r),t&&a&&n?e(s,!1):t||a||n?(n&&(s+="&updated=false"),!t&&a?s+="&installed=false":t&&!a&&(s+="&installed=true"),e(s,!1)):e(s,!1)},this.getData=e=>{this.getParsedGETParamsForExtensions((t,a)=>{this.setState({nothingShown:a}),a||C("internal.php?object=centreon_module&action=list"+t).get().then(({data:t})=>{this.setState({extensions:t},()=>{e&&"function"==typeof e&&e()})})})},this.hideExtensionDetails=()=>{this.setState({modalDetailsActive:!1,modalDetailsLoading:!1})},this.activateExtensionsDetails=(e,t)=>{this.setState({modalDetailsActive:!0,modalDetailsLoading:!0,modalDetailsType:t},()=>{this.getExtensionDetails(e,t)})},this.getExtensionDetails=(e,t)=>{C(`internal.php?object=centreon_module&action=details&type=${t}&id=${e}`).get().then(({data:e})=>{const{result:t}=e;t.images&&(t.images=t.images.map(e=>"./"+e)),this.setState({extensionDetails:t,modalDetailsLoading:!1})})}}render(){const{extensions:e,modulesActive:t,deleteToggled:a,widgetsActive:n,not_installed:s,installed:l,updated:i,search:o,nothingShown:c,modalDetailsActive:m,modalDetailsLoading:d,modalDetailsType:u,extensionsUpdatingStatus:p,extensionsInstallingStatus:h,deletingEntity:g,extensionDetails:b}=this.state,f=(l&&s&&i||!l&&!s&&!i)&&0===o.length&&(t&&n||!t&&!n);return r.a.createElement("div",null,r.a.createElement(nn.a,{fullText:{label:"Search",value:o,filterKey:"search"},onChange:this.onChange.bind(this),switches:[[{customClass:"container__col-md-4 container__col-xs-4",switchTitle:"Status",switchStatus:"Not installed",value:s,filterKey:"not_installed"},{customClass:"container__col-md-4 container__col-xs-4",switchStatus:"Installed",value:l,filterKey:"installed"},{customClass:"container__col-md-4 container__col-xs-4",switchStatus:"Outdated",value:i,filterKey:"updated"}],[{customClass:"container__col-sm-3 container__col-xs-4",switchTitle:"Type",switchStatus:"Module",value:t,filterKey:"modulesActive"},{customClass:"container__col-sm-3 container__col-xs-4",switchStatus:"Widget",value:n,filterKey:"widgetsActive"},{button:!0,label:"Clear Filters",color:"black",buttonType:"bordered",onClick:this.clearFilters.bind(this)}]]}),r.a.createElement(rn.a,null,r.a.createElement(sn.a,{label:""+(f?"Update all":"Update selection"),buttonType:"regular",customClass:"mr-2",color:"orange",style:{opacity:"1"},onClick:this.runActionOnAllEntities.bind(this,"outdated",!0,"extensionsUpdatingStatus")}),r.a.createElement(sn.a,{label:""+(f?"Install all":"Install selection"),buttonType:"regular",customClass:"mr-2",color:"green",onClick:this.runActionOnAllEntities.bind(this,"installed",!1,"extensionsInstallingStatus")}),r.a.createElement(T,{path:"/administration/extensions/manager"})),e.result&&!c?r.a.createElement(r.a.Fragment,null,e.result.module&&(t||!t&&!n)?r.a.createElement(ln.a,{onCardClicked:this.activateExtensionsDetails,onDelete:this.toggleDeleteModal,onInstall:this.installById,onUpdate:this.updateById,title:"Modules",type:"module",updating:p,installing:h,entities:e.result.module.entities}):null,e.result.widget&&(n||!t&&!n)?r.a.createElement(ln.a,{onCardClicked:this.activateExtensionsDetails,onDelete:this.toggleDeleteModal,onInstall:this.installById,onUpdate:this.updateById,titleColor:"blue",hrTitleColor:"blue",hrColor:"blue",title:"Widgets",type:"widget",updating:p,installing:h,entities:e.result.widget.entities}):null):null,b&&m?r.a.createElement(on.a,{type:u,loading:d,onCloseClicked:this.hideExtensionDetails.bind(this),onInstallClicked:this.installById,onDeleteClicked:this.deleteById,onUpdateClicked:this.updateById,modalDetails:b}):null,a?r.a.createElement(cn.a,{deletingEntity:g,onConfirm:this.deleteById,onCancel:this.toggleDeleteModal}):null)}}var dn=Object(s.connect)(null,e=>({reloadNavigation:()=>{e(Object(fe.batchActions)([$e(),Xe()]))}}))(mn),un=a(770),pn=a.n(un);var hn=()=>r.a.createElement("div",{className:pn.a["message-alert"]},"You are not allowed to see this page"),gn=a(1385),bn=a(64),fn=a(1373),vn=a(1394),En=a(1374),_n=a(784),yn=a(1395),wn=a(805),kn=a(476),Sn=a(1415),On=a(1364);const jn=({searchValue:e,searchOptions:t})=>{if(!e)return;const a=(({searchValue:e,searchOptions:t})=>t.map(t=>{const a=t.replace(".","\\.")+":([^\\s]+)",[,n]=e.match(a)||[];return{field:t,value:n}}).filter(({value:e})=>e))({searchValue:e,searchOptions:t});return Ot()(a)?{$or:t.map(t=>({[t]:{$rg:""+e}}))}:{$and:a.map(({field:e,value:t})=>({[e]:{$rg:""+t}}))}},Cn="./api/beta/monitoring/hosts/check",In="./api/beta/monitoring/services/check",xn=({name:e,value:t})=>`${e}=${JSON.stringify(t)}`,Nn=({sort:e,page:t,limit:a,search:n,searchOptions:r})=>[{name:"page",value:t},{name:"limit",value:a},{name:"sort_by",value:e},{name:"search",value:jn({searchValue:n,searchOptions:r})}],Tn=({baseEndpoint:e,params:t})=>`${e}?${(e=>e.filter(({value:e})=>void 0!==e&&0!==e.length).map(xn).join("&"))(t)}`,Dn=e=>{const t=Nn(Object.assign({searchOptions:["h.name","h.alias","h.address","s.description"]},e));return Tn({baseEndpoint:"./api/beta/monitoring/resources",params:[...t,{name:"states",value:e.states},{name:"types",value:e.resourceTypes},{name:"statuses",value:e.statuses},{name:"hostgroup_ids",value:e.hostGroupIds},{name:"servicegroup_ids",value:e.serviceGroupIds}]})},An=e=>{const t=Nn(Object.assign({searchOptions:["name"]},e));return Tn({baseEndpoint:"./api/beta/monitoring/hostgroups",params:t})},Pn=e=>Tn({baseEndpoint:"./api/beta/monitoring/servicegroups",params:[...Nn(Object.assign({searchOptions:["name"]},e))]}),Ln=({endpoint:e,requestParams:t})=>j.a.get(e,t).then(({data:e})=>e),Fn=({id:e,parent:t})=>({parent_resource_id:(null==t?void 0:t.id)||null,resource_id:e}),Rn=e=>Ln({endpoint:"./api/internal.php?object=centreon_topcounter&action=user",requestParams:e});var zn=a(1403),Mn=a(1377),$n=a(1398),Gn=a(1378),Bn=a(210),Wn=a(240),qn=a.n(Wn),Un=a(367),Hn=a.n(Un),Vn=a(1376),Kn=a(294),Xn=a(285);function Qn(){return(Qn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var Jn=n.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),Yn=n.createElement("path",{d:"M8.6 6.149a1.692 1.692 0 10-1.692-1.692A1.692 1.692 0 008.6 6.149zM18.76 13.224a1.05 1.05 0 00-.968-.647s-2.067-.275-2.68.125a2.464 2.464 0 00-.644.8l-3.454-.547c-.265-.874-1.4-4.183-1.4-4.183l-.846-1.353a1.743 1.743 0 00-1.438-.846 4.571 4.571 0 00-.677.084l-4.4 1.867V12.5h.241l2.222.352-1.61 8.107h1.777l1.522-6.768 1.777 1.692v5.076h1.692v-6.345l-1.19-1.135 5.428.859-3.084 6.815 10.976-.11zM8.554 10.613s.577 1.356.88 2.089l-1.259-.2zm-4.606 1.22V9.621l1.522-.592-.586 2.952z"});function Zn(e){return n.createElement("svg",Qn({width:24,height:24},e),Jn,Yn)}var er=e=>r.a.createElement(Xn.a,Object.assign({component:Zn},e));const tr=P.I18n.t("Acknowledged"),ar=P.I18n.t("Acknowledge"),nr=P.I18n.t("Acknowledged by"),rr=P.I18n.t("Acknowledge services attached to host"),sr=P.I18n.t("at"),lr=P.I18n.t("Active"),ir=P.I18n.t("All"),or=P.I18n.t("Author"),cr=P.I18n.t("Comment"),mr=P.I18n.t("Cancel"),dr=P.I18n.t("Clear all"),ur=P.I18n.t("Criterias"),pr=P.I18n.t("Critical"),hr=P.I18n.t("Check duration"),gr=P.I18n.t("Command"),br=P.I18n.t("Copy"),fr=P.I18n.t("Command copied to clipboard"),vr=P.I18n.t("Current notification number"),Er=P.I18n.t("Current state duration"),_r=P.I18n.t("Details"),yr=P.I18n.t("Down"),wr=P.I18n.t("Downtime duration"),kr=P.I18n.t("Duration"),Sr=P.I18n.t("Seconds"),Or=P.I18n.t("Minutes"),jr=P.I18n.t("Hours"),Cr=P.I18n.t("End date must be greater than start date"),Ir=P.I18n.t("End time"),xr=P.I18n.t("Entry time"),Nr=P.I18n.t("Filter"),Tr=P.I18n.t("Is this resource flapping?"),Dr=P.I18n.t("Show criterias filters"),Ar=P.I18n.t("From"),Pr=P.I18n.t("Start date"),Lr=P.I18n.t("End date"),Fr=P.I18n.t("Change start date"),Rr=P.I18n.t("Change start time"),zr=P.I18n.t("Change end date"),Mr=P.I18n.t("Change end time"),$r=P.I18n.t("Fixed"),Gr=P.I18n.t("Graph"),Br=P.I18n.t("Host"),Wr=P.I18n.t("Host group"),qr=P.I18n.t("Downtime"),Ur=P.I18n.t("In downtime"),Hr=P.I18n.t("Last 24h"),Vr=P.I18n.t("Last 7 days"),Kr=P.I18n.t("Last 31 days"),Xr=P.I18n.t("Set downtime"),Qr=P.I18n.t("Set downtime on"),Jr=P.I18n.t("Downtime set by"),Yr=P.I18n.t("Set downtime on services attached to host"),Zr=P.I18n.t("Check"),es=P.I18n.t("Last check"),ts=P.I18n.t("Last notification"),as=P.I18n.t("Last state change"),ns=P.I18n.t("Latency"),rs=P.I18n.t("Less"),ss=P.I18n.t("Next check"),ls=P.I18n.t("No"),is=P.I18n.t("Notify"),os=P.I18n.t("If checked, a notification is sent to the contacts linked to the object to warn that the incident on the resource has been acknowledged"),cs=P.I18n.t("Ok"),ms=P.I18n.t("Open"),ds=P.I18n.t("Percent state change"),us=P.I18n.t("Performance data"),ps=P.I18n.t("Persistent"),hs=P.I18n.t("Pending"),gs=P.I18n.t("Poller"),bs=P.I18n.t("Required"),fs=P.I18n.t("Resource name"),vs=P.I18n.t("Resource problems"),Es=P.I18n.t("Resource"),_s=P.I18n.t("Search"),ys=(P.I18n.t("Severity"),P.I18n.t("Status")),ws=P.I18n.t("Sticky"),ks=P.I18n.t("Tries"),Ss=P.I18n.t("Information"),Os=P.I18n.t("More"),js=P.I18n.t("Refresh"),Cs=P.I18n.t("Disable autorefresh"),Is=P.I18n.t("Enable autorefresh"),xs=P.I18n.t("Search help"),Ns=P.I18n.t("This search bar will search matching occurences you type contained in: host name or alias or address or service description"),Ts=P.I18n.t("You can use regular expression syntax to retrieve more relevant results"),Ds=P.I18n.t("It's possible to specify the criteria you precisely want to search in using the following syntax:"),As=P.I18n.t("Some examples:"),Ps=P.I18n.t("will search host name starting by"),Ls=P.I18n.t("will search for all service description finishing by"),Fs=P.I18n.t("will search for all host alias containing"),Rs=P.I18n.t("will search for FQDN that doesn't contain"),zs=P.I18n.t("and host alias containing"),Ms=P.I18n.t("Service"),$s=P.I18n.t("Service group"),Gs=P.I18n.t("Start time"),Bs=P.I18n.t("State"),Ws=P.I18n.t("State filter"),qs=P.I18n.t("Status information"),Us=(P.I18n.t("Successfully acknowledged"),P.I18n.t("Timezone")),Hs=P.I18n.t("To"),Vs=P.I18n.t("Acknowledge command sent"),Ks=P.I18n.t("Downtime command sent"),Xs=P.I18n.t("Check command sent"),Qs=P.I18n.t("Type of resource"),Js=P.I18n.t("Unhandled problems"),Ys=P.I18n.t("Unhandled"),Zs=P.I18n.t("Unreachable"),el=P.I18n.t("Unknown"),tl=P.I18n.t("Up"),al=P.I18n.t("Yes"),nl=P.I18n.t("Oops, something went wrong"),rl=P.I18n.t("Warning"),sl=P.I18n.t("Seems that your Apache configuration is not up-to-date"),ll=P.I18n.t("Contact your Centreon administrator or update the following file"),il=P.I18n.t("See Documentation");var ol=a(357),cl=a.n(ol),ml=a(358),dl=a.n(ml),ul=a(1365),pl=a(486),hl=a(1366),gl=a(1367),bl=a(1368),fl=a(1369),vl=a(1370),El=a(1371),_l=a(771);const yl=e=>e?al:ls;var wl=({endpoint:e,columns:t})=>{const[a,s]=Object(n.useState)(),{cancel:l,token:i}=Object(_l.a)();Object(n.useEffect)(()=>(Ln({endpoint:e,requestParams:{cancelToken:i}}).then(e=>s(e.result)).catch(()=>{s([])}),()=>l()),[]);const o=void 0===a,c=null===a,m=!o&&!c,d=150*t.length;return r.a.createElement(ul.a,{component:pl.a},r.a.createElement(hl.a,{size:"small",style:{width:d}},r.a.createElement(gl.a,null,r.a.createElement(bl.a,null,t.map(({label:e})=>r.a.createElement(fl.a,{key:e},e)))),r.a.createElement(vl.a,null,o&&r.a.createElement(bl.a,null,r.a.createElement(fl.a,{colSpan:t.length},r.a.createElement(El.a,{height:20,animation:"wave"}))),m&&(null==a?void 0:a.map((e,a)=>r.a.createElement(bl.a,{key:a},t.map(({label:t,getContent:a})=>r.a.createElement(fl.a,{key:t},r.a.createElement("span",null,null==a?void 0:a(e))))))),c&&r.a.createElement(bl.a,null,r.a.createElement(fl.a,{align:"center",colSpan:t.length},r.a.createElement("span",null,nl))))))},kl=a(372),Sl=a(772);const Ol=({isoDate:e,to:t})=>Object(kl.a)(Object(Sl.a)(e),t),jl=e=>Ol({isoDate:e,to:"MM/dd/yyyy HH:mm"}),Cl=e=>Ol({isoDate:e,to:"HH:mm"}),Il=Object(Zt.a)({comment:{display:"block",maxWidth:500,whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}});var xl=({endpoint:e})=>{const t=Il(),a=[{id:"author",label:or,type:Kn.a.string,getContent:({author_name:e})=>e},{id:"is_fixed",label:$r,type:Kn.a.string,getContent:({is_fixed:e})=>e?al:ls},{id:"start_time",label:Gs,type:Kn.a.string,getContent:({start_time:e})=>jl(e)},{id:"end_time",label:Ir,type:Kn.a.string,getContent:({end_time:e})=>jl(e)},{id:"comment",label:cr,type:Kn.a.string,getContent:({comment:e})=>n.createElement("span",{className:t.comment},cl()(dl.a.sanitize(e)))}];return n.createElement(wl,{columns:a,endpoint:e})};const Nl=Object(Zt.a)({comment:{display:"block",maxWidth:500,whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}});var Tl=({endpoint:e})=>{const t=Nl(),a=[{id:"author",label:or,type:Kn.a.string,getContent:({author_name:e})=>e},{id:"entry_time",label:xr,type:Kn.a.string,getContent:({entry_time:e})=>jl(e)},{id:"is_persistent",label:ps,type:Kn.a.string,getContent:({is_persistent_comment:e})=>yl(e)},{id:"is_sticky",label:ws,type:Kn.a.string,getContent:({is_sticky:e})=>yl(e)},{id:"comment",label:cr,type:Kn.a.string,getContent:({comment:e})=>n.createElement("span",{className:t.comment},cl()(dl.a.sanitize(e)))}];return n.createElement(wl,{columns:a,endpoint:e})},Dl=a(1372);const Al=Object(Zt.a)(()=>({tooltip:{maxWidth:"none",backgroundColor:"transparent"},iconButton:{padding:0}}));var Pl=({children:e,Chip:t,label:a,onClick:r})=>{const s=Al();return n.createElement(Dl.a,{placement:"left",title:e,classes:{tooltip:s.tooltip},"aria-label":a,enterDelay:200,enterNextDelay:200,leaveDelay:0,interactive:!0,PopperProps:{onClick:e=>{e.preventDefault(),e.stopPropagation()}},onClick:e=>{e.preventDefault(),e.stopPropagation(),null==r||r()}},n.createElement("span",null,n.createElement(t,null)))};const Ll=Object(Zt.a)(e=>({chip:({color:t})=>Object.assign({width:e.spacing(2.5),height:e.spacing(2.5)},t&&{color:t})}));var Fl=({icon:e,color:t})=>{const a=Ll({color:t});return n.createElement("div",{className:""+a.chip},e)};var Rl=()=>{const e=Object(bn.a)();return n.createElement(Fl,{icon:n.createElement(er,{fontSize:"small"}),color:e.palette.action.inDowntime})};var zl=()=>{const e=Object(bn.a)();return n.createElement(Fl,{icon:n.createElement(qn.a,{fontSize:"small"}),color:e.palette.action.acknowledged})};const Ml=({endpoint:e,Chip:t,DetailsTable:a,label:n})=>r.a.createElement(Pl,{Chip:t,label:n},r.a.createElement(a,{endpoint:e})),$l=({resource:e})=>r.a.createElement(Ml,{endpoint:e.downtime_endpoint,label:`${e.name} ${Ur}`,DetailsTable:xl,Chip:Rl}),Gl=({resource:e})=>r.a.createElement(Ml,{endpoint:e.acknowledgement_endpoint,label:`${e.name} ${tr}`,DetailsTable:Tl,Chip:zl});var Bl=({row:e})=>r.a.createElement(fn.a,{container:!0,spacing:1},e.in_downtime&&r.a.createElement(fn.a,{item:!0},r.a.createElement($l,{resource:e})),e.acknowledged&&r.a.createElement(fn.a,{item:!0},r.a.createElement(Gl,{resource:e}))),Wl=a(788),ql=a.n(Wl),Ul=a(120),Hl=a(783),Vl=a.n(Hl),Kl=a(1375),Xl=a(1404),Ql=a(1417),Jl=a(18),Yl=a(786);var Zl=({onSuccess:e,endpoint:t})=>{const{token:a,cancel:r}=Object(_l.a)(),{showMessage:s}=Object(En.a)();return n.useEffect(()=>()=>r(),[]),()=>Object(Yl.a)({endpoint:t,requestParams:{cancelToken:a}}).then(t=>{e(t)}).catch(e=>{j.a.isCancel(e)||s({message:nl,severity:_n.a.error})})};var ei=a(787),ti=a(808),ai=a(807),ni=a(1416),ri=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a};const si=({metrics:e,times:t})=>Object(Sn.a)(t=>({time:t,metrics:e}),t),li=({time:e,metrics:t},a)=>Object.assign({time:e},Object(ei.a)((e,{metric:t,data:n})=>Object.assign(Object.assign({},e),{[t]:n[a]}),{},t));var ii=e=>{const t=t=>t>Object(ti.a)(t-1,["global","lower-limit"],e),a=Object(ni.a)(Sn.a);return Object(zn.a)(si,a(li),Object(Sn.a)(e=>{var{time:a}=e,n=ri(e,["time"]);return Object.assign(Object.assign({},Object(ai.a)(t,n)),{time:a})}))(e)};const oi=Object(Zt.a)(e=>({container:{display:"grid",gridTemplateRows:"20px 1fr",height:"100%",justifyItems:"center"},graph:{height:"100%",width:"100%"},loadingSkeleton:{display:"grid",gridTemplateRows:"10px 1fr auto",gridGap:e.spacing(1),paddingLeft:e.spacing(2),paddingRight:e.spacing(2),height:"95%"},loadingSkeletonLine:{transform:"none",paddingBottom:e.spacing(1)}})),ci=()=>{const e=oi(),t=n.createElement(El.a,{className:e.loadingSkeletonLine});return n.createElement("div",{className:e.loadingSkeleton},t,t,t)};var mi=({endpoint:e,xAxisTickFormat:t="HH:mm"})=>{const a=oi(),[r,s]=n.useState(),l=Zl({endpoint:e,onSuccess:s});if(n.useEffect(()=>{l()},[e]),void 0===r)return n.createElement(ci,null);if(!(r.times.length>0))return null;const i=e=>["B","bytes","bytespersecond","B/s","B/sec","o","octets"].includes(e)?2:10,o=()=>Object(zn.a)(Object(Sn.a)(Object(Kl.a)("unit")),Xl.a)(r.metrics),c=o().length<3,m=({value:e,unit:t})=>Object(Ql.a)(t)?e:Vl()(e,{base:i(t)}).replace("B",""),d=c?o().map((e,t)=>n.createElement(Ul.i,{yAxisId:e,key:e,unit:e,orientation:0===t?"left":"right",tickFormatter:t=>m({value:t,unit:e}),tick:{fontSize:13}})):n.createElement(Ul.i,{width:40}),u=e=>(({time:e,to:t})=>{const a=1e3*Number(e);return Object(kl.a)(new Date(a),t)})({time:e,to:t});return n.createElement("div",{className:a.container},n.createElement(Bn.a,{variant:"body2",color:"textPrimary"},r.global.title),n.createElement(Ul.f,{className:a.graph},n.createElement(Ul.c,{data:ii(r),stackOffset:"sign"},n.createElement(Ul.d,{formatter:e=>n.createElement(Bn.a,{variant:"caption",color:"textPrimary"},e),iconType:"circle",iconSize:8,wrapperStyle:{bottom:0}}),n.createElement(Ul.b,{strokeDasharray:"3 3"}),n.createElement(Ul.h,{dataKey:"time",tickFormatter:u,tick:{fontSize:13}}),d,r.metrics.map(({metric:e,ds_data:t,unit:a})=>{const r=c?a:void 0;return t.ds_filled?n.createElement(Ul.a,{key:e,dot:!1,dataKey:e,unit:a,stroke:t.ds_color_line,fill:Object(Jl.c)(t.ds_color_area,.01*t.ds_transparency),yAxisId:r,isAnimationActive:!1}):n.createElement(Ul.e,{key:e,dataKey:e,unit:a,stroke:t.ds_color_line,dot:!1,yAxisId:r,isAnimationActive:!1})}),n.createElement(Ul.g,{labelFormatter:u,formatter:(e,t,{unit:a})=>[m({value:e,unit:a}),t]}))))},di=a(389),ui=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a};const pi=Object(Zt.a)(()=>({button:{padding:0}}));var hi=e=>{var{title:t,onClick:a,ariaLabel:r}=e,s=ui(e,["title","onClick","ariaLabel"]);const l=pi();return n.createElement(Dl.a,{title:t,onClick:a,"aria-label":r},n.createElement("span",null,n.createElement(di.a,Object.assign({className:l.button,color:"primary"},s))))};const gi=Object(Zt.a)(e=>({graph:{display:"block",height:200,width:575,paddingTop:e.spacing(1)}}));var bi=({onClick:e})=>({row:t})=>{const a=gi();return t.performance_graph_endpoint?n.createElement(Pl,{Chip:()=>n.createElement(hi,{title:Gr,onClick:()=>e(t),ariaLabel:Gr},n.createElement(ql.a,{fontSize:"small"})),label:Gr},n.createElement(pl.a,{className:a.graph},n.createElement(mi,{endpoint:t.performance_graph_endpoint}))):null};const fi=Object(Zt.a)(e=>({resourceDetailsCell:{padding:e.spacing(0,.5)},resourceNameItem:{display:"flex",alignItems:"center",paddingLeft:e.spacing(1)},extraSmallChipContainer:{height:16},smallChipContainer:{height:18},smallChipLabel:{padding:e.spacing(.5)}})),vi=({row:e})=>{const t=fi();return e.severity?r.a.createElement(Vn.b,{label:e.severity.level.toString(),severityCode:Vn.a.None,classes:{root:t.extraSmallChipContainer,label:t.smallChipLabel}}):null},Ei=({actions:e,row:t})=>{const a=fi();return r.a.createElement(fn.a,{container:!0,spacing:1,alignItems:"center"},r.a.createElement(fn.a,{item:!0},r.a.createElement(hi,{title:ar,color:"primary",onClick:()=>e.onAcknowledge(t),ariaLabel:`${ar} ${t.name}`},r.a.createElement(qn.a,{fontSize:"small"}))),r.a.createElement(fn.a,{item:!0},r.a.createElement(hi,{title:Xr,onClick:()=>e.onDowntime(t),ariaLabel:`${Qr} ${t.name}`},r.a.createElement(er,{fontSize:"small"}))),r.a.createElement(fn.a,{item:!0},r.a.createElement(hi,{title:Zr,onClick:()=>e.onCheck(t),ariaLabel:`${Zr} ${t.name}`},r.a.createElement(Hn.a,{fontSize:"small"}))),r.a.createElement(fn.a,{item:!0},r.a.createElement(Vn.b,{label:t.status.name[0],severityCode:t.status.severity_code,classes:{root:a.smallChipContainer,label:a.smallChipLabel}})))},_i=e=>({row:t,isHovered:a})=>a?r.a.createElement(Ei,{actions:e,row:t}):r.a.createElement(Vn.b,{style:{width:100,height:20,margin:0},label:t.status.name,severityCode:t.status.severity_code}),yi=({row:e})=>{const t=fi();return r.a.createElement(fn.a,{container:!0,spacing:0,className:t.resourceDetailsCell},r.a.createElement(fn.a,{item:!0},e.icon?r.a.createElement("img",{src:e.icon.url,alt:e.icon.name,width:16,height:16}):r.a.createElement(Vn.b,{label:e.short_type,severityCode:Vn.a.None,classes:{root:t.extraSmallChipContainer,label:t.smallChipLabel}})),r.a.createElement(fn.a,{item:!0,className:t.resourceNameItem},r.a.createElement(Bn.a,{variant:"body2"},e.name)))},wi=({row:e})=>{var t,a;return e.parent?r.a.createElement(fn.a,{container:!0,spacing:1},r.a.createElement(fn.a,{item:!0,xs:1}),r.a.createElement(fn.a,{item:!0},r.a.createElement(Vn.b,{severityCode:(null===(a=null===(t=e.parent)||void 0===t?void 0:t.status)||void 0===a?void 0:a.severity_code)||0})),r.a.createElement(fn.a,{item:!0},r.a.createElement(Bn.a,{variant:"body2"},e.parent.name))):null};var ki=a(6),Si=a(1379),Oi=a(1380),ji=a(1406),Ci=a(296),Ii=a(792),xi=a.n(Ii),Ni=a(1381),Ti=a(1382),Di=a(806),Ai=a(1410);const Pi={id:"unhandled_problems",name:Ys},Li=[Pi,{id:"acknowledged",name:tr},{id:"in_downtime",name:Ur}],Fi=[{id:"host",name:Br},{id:"service",name:Ms}],Ri={id:"WARNING",name:rl},zi={id:"DOWN",name:yr},Mi={id:"CRITICAL",name:pr},$i={id:"UNKNOWN",name:el},Gi=[{id:"OK",name:cs},{id:"UP",name:tl},Ri,zi,Mi,{id:"UNREACHABLE",name:Zs},$i,{id:"PENDING",name:hs}],Bi={id:"all",name:ir,criterias:{resourceTypes:[],states:[],statuses:[],hostGroups:[],serviceGroups:[]}},Wi={id:"unhandled_problems",name:Js,criterias:{resourceTypes:[],states:[Pi],statuses:[Ri,zi,Mi,$i],hostGroups:[],serviceGroups:[]}},qi={id:"resource_problems",name:vs,criterias:{resourceTypes:[],states:[],statuses:[Ri,zi,Mi,$i],hostGroups:[],serviceGroups:[]}},Ui={resource_problems:qi,all:Bi,unhandled_problems:Wi};var Hi=a(1396),Vi=a(791),Ki=a.n(Vi),Xi=a(789),Qi=a.n(Xi);const Ji=Object(Zt.a)(e=>({tooltip:{backgroundColor:e.palette.common.white,color:e.palette.text.primary,boxShadow:e.shadows[3],fontSize:e.typography.pxToRem(12),maxWidth:500,padding:e.spacing(1,2,1,1)},buttonClose:{position:"absolute",right:e.spacing(.5)}})),Yi=["h.name","h.alias","h.address","s.description"],Zi=({onClose:e})=>{const t=Ji();return n.createElement(n.Fragment,null,n.createElement(di.a,{size:"small",onClick:e,className:t.buttonClose},n.createElement(Qi.a,{fontSize:"small"})),n.createElement(Hi.a,{padding:1},n.createElement("p",null,`${Ns}. ${Ts}.`),n.createElement("p",null,`${Ds} ${Yi.join(":, ")}:.`),n.createElement("p",null,As),n.createElement("ul",null,n.createElement("li",null,n.createElement("b",null,"h.name:^FR20"),` ${Ps} "FR20"`),n.createElement("li",null,n.createElement("b",null,"s.description:ens192$"),` ${Ls} "ens192"`),n.createElement("li",null,n.createElement("b",null,"h.alias:prod"),` ${Fs} "prod"`),n.createElement("li",null,n.createElement("b",null,"h.address:^((?!production).)*$"),` ${Rs} "production"`),n.createElement("li",null,n.createElement("b",null,"h.name:^FR20 h.alias:prod"),` ${Ps} "FR20" ${zs} "prod"`))))};var eo=()=>{const e=Ji(),[t,a]=n.useState(!1);return n.createElement(Dl.a,{open:t,title:n.createElement(Zi,{onClose:()=>{a(!1)}}),classes:{tooltip:e.tooltip},interactive:!0},n.createElement(di.a,{"aria-label":xs,size:"small",onClick:()=>{a(!t)}},n.createElement(Ki.a,null)))};const to=Object(ki.a)(e=>({root:{padding:e.spacing(0,3,0,2),minHeight:"auto","&$expanded":{minHeight:"auto"},justifyContent:"flex-start"},content:{margin:e.spacing(1,0),"&$expanded":{margin:e.spacing(1,0)},flexGrow:0},expanded:{}}))(Si.a),ao=Object(ki.a)(e=>({root:{padding:e.spacing(0,.5,1,2)}}))(Oi.a),no=Object(Zt.a)(e=>({filterBox:{padding:e.spacing(),backgroundColor:e.palette.common.white},filterLineLabel:{width:60,textAlign:"center"},filterGroup:{minWidth:200},searchField:{width:500},autocompleteField:{minWidth:200,maxWidth:400},collapseWrapper:{margin:0,padding:e.spacing(1),"&$expanded":{margin:0,padding:e.spacing(1)}},expanded:{}}));var ro=({filter:e,onFilterGroupChange:t,nextSearch:a,onSearchRequest:r,onSearchPrepare:s,selectedResourceTypes:l,onResourceTypesChange:i,selectedStates:o,onStatesChange:c,selectedStatuses:m,onStatusesChange:d,selectedHostGroups:u,onHostGroupsChange:p,selectedServiceGroups:h,onServiceGroupsChange:g,onClearAll:b})=>{const f=no(),v=({result:e})=>e,E=e=>{e.stopPropagation()};return n.createElement(ji.a,{square:!0},n.createElement(to,{expandIcon:n.createElement(xi.a,{color:"primary","aria-label":Dr})},n.createElement(fn.a,{spacing:1,container:!0,alignItems:"center"},n.createElement(fn.a,{item:!0},n.createElement(Bn.a,{className:f.filterLineLabel,variant:"h6"},Nr)),n.createElement(fn.a,{item:!0},n.createElement(Ni.a,{className:f.filterGroup,options:[Wi,qi,Bi],selectedOptionId:e.id,onClick:E,onChange:t,"aria-label":Ws})),n.createElement(fn.a,{item:!0},n.createElement(Ti.a,{className:f.searchField,EndAdornment:eo,value:a||"",onClick:E,onChange:s,placeholder:fs,onKeyDown:e=>{13===e.keyCode&&r()}})),n.createElement(fn.a,{item:!0},n.createElement(Ci.a,{variant:"contained",color:"primary",onClick:e=>{E(e),r()}},_s)))),n.createElement(ao,null,n.createElement(fn.a,{spacing:1,container:!0,alignItems:"center"},n.createElement(fn.a,{item:!0},n.createElement(Bn.a,{className:f.filterLineLabel,variant:"subtitle1"},ur)),n.createElement(fn.a,{item:!0},n.createElement(Di.a,{className:f.autocompleteField,options:Fi,label:Qs,onChange:i,value:l||[],openText:`${ms} ${Qs}`})),n.createElement(fn.a,{item:!0},n.createElement(Di.a,{className:f.autocompleteField,options:Li,label:Bs,onChange:c,value:o||[],openText:`${ms} ${Bs}`})),n.createElement(fn.a,{item:!0},n.createElement(Di.a,{className:f.autocompleteField,options:Gi,label:ys,onChange:d,value:m||[],openText:`${ms} ${ys}`})),n.createElement(fn.a,{item:!0},n.createElement(Ai.a,{className:f.autocompleteField,baseEndpoint:An({limit:10}),getSearchEndpoint:e=>An({limit:10,search:e?"name:"+e:void 0}),getOptionsFromResult:v,label:Wr,onChange:p,value:u||[],openText:`${ms} ${Wr}`})),n.createElement(fn.a,{item:!0},n.createElement(Ai.a,{className:f.autocompleteField,baseEndpoint:Pn({limit:10}),getSearchEndpoint:e=>Pn({limit:10,search:e?"name:"+e:void 0}),label:$s,onChange:g,getOptionsFromResult:v,value:h||[],openText:`${ms} ${$s}`})),n.createElement(fn.a,{item:!0},n.createElement(Ci.a,{color:"primary",onClick:b},dr)))))},so=a(374),lo=a(1405),io=a(1313),oo=a(1411),co=a(768),mo=a(370);var uo=({resources:e,canConfirm:t,onCancel:a,onConfirm:r,errors:s,values:l,submitting:i,handleChange:o,loading:c})=>{const m=e.length>0,d=e.find(e=>"host"===e.type);return n.createElement(oo.a,{labelCancel:mr,labelConfirm:ar,labelTitle:ar,open:m,onClose:a,onCancel:a,onConfirm:r,confirmDisabled:!t,submitting:i},c&&n.createElement(co.a,{fullContent:!0}),n.createElement(fn.a,{direction:"column",container:!0,spacing:1},n.createElement(fn.a,{item:!0},n.createElement(mo.a,{value:l.comment,onChange:o("comment"),multiline:!0,label:cr,fullWidth:!0,rows:3,error:void 0!==(null==s?void 0:s.comment),helperText:null==s?void 0:s.comment})),n.createElement(fn.a,{container:!0,item:!0,direction:"column"},n.createElement(fn.a,{item:!0,container:!0,xs:!0,alignItems:"center"},n.createElement(fn.a,{item:!0,xs:1},n.createElement(lo.a,{inputProps:{"aria-label":is},color:"primary",value:l.notify,onChange:o("notify")})),n.createElement(fn.a,{item:!0,xs:!0},n.createElement(Bn.a,null,is))),n.createElement(fn.a,{item:!0,container:!0,xs:!0},n.createElement(fn.a,{item:!0,xs:1}),n.createElement(fn.a,{item:!0,xs:!0},n.createElement(io.a,null,os)))),d&&n.createElement(fn.a,{container:!0,item:!0,direction:"column"},n.createElement(fn.a,{item:!0,container:!0,xs:!0,alignItems:"center"},n.createElement(fn.a,{item:!0,xs:1},n.createElement(lo.a,{checked:l.acknowledgeAttachedResources,inputProps:{"aria-label":rr},color:"primary",onChange:o("acknowledgeAttachedResources")})),n.createElement(fn.a,{item:!0,xs:!0},n.createElement(Bn.a,null,rr))))))};const po=X.c().shape({comment:X.d().required(bs),notify:X.a()});var ho=({resources:e,onClose:t,onSuccess:a})=>{const{cancel:r,token:s}=Object(_l.a)(),{showMessage:l}=Object(En.a)(),i=e=>l({message:e,severity:_n.a.error}),[o,c]=n.useState(!1),m=Object(so.a)({initialValues:{comment:"",notify:!1,acknowledgeAttachedResources:!1},onSubmit:(t,{setSubmitting:n})=>{n(!0),(({resources:e,params:t,cancelToken:a})=>j.a.post("./api/beta/monitoring/resources/acknowledge",{resources:Object(Sn.a)(Object(On.a)(["type","id","parent"]),e),acknowledgement:{with_services:t.acknowledgeAttachedResources,is_notify_contacts:t.notify,comment:t.comment}},{cancelToken:a}))({resources:e,params:t,cancelToken:s}).then(()=>{l({message:Vs,severity:_n.a.success}),a()}).catch(()=>i(nl)).finally(()=>n(!1))},validationSchema:po}),d=e.length>0;return n.useEffect(()=>{d&&Rn(s).then(e=>m.setFieldValue("comment",`${nr} ${e.username}`)).catch(()=>i(nl)).finally(()=>c(!0))},[d]),n.useEffect(()=>()=>r(),[]),0===e.length?null:n.createElement(uo,{resources:e,onConfirm:m.submitForm,onCancel:t,canConfirm:m.isValid,errors:m.errors,values:m.values,handleChange:m.handleChange,submitting:m.isSubmitting,loading:!o})},go=a(794),bo=a(61),fo=a(1384),vo=a(1418);const Eo={disableToolbar:!0,variant:"inline",margin:"none",inputVariant:"filled",TextFieldComponent:mo.a,InputProps:{disableUnderline:!0}},_o=Object.assign(Object.assign({},Eo),{format:"LL"}),yo=Object.assign(Object.assign({},Eo),{ampm:!1,format:"LT"});var wo=({locale:e,timezone:t,resources:a,canConfirm:r,onCancel:s,onConfirm:l,errors:i,values:o,submitting:c,handleChange:m,setFieldValue:d,loading:u})=>{var p,h;const g=a.length>0,b=a.find(e=>"host"===e.type),f=e=>t=>{d(e,t)};return n.useEffect(()=>{W.a.locale(e)},[e]),n.useEffect(()=>{W.a.tz.setDefault(t)},[t]),n.createElement(oo.a,{labelCancel:mr,labelConfirm:Xr,labelTitle:qr,open:g,onClose:s,onCancel:s,onConfirm:l,confirmDisabled:!r,submitting:c},u&&n.createElement(co.a,{fullContent:!0}),n.createElement(bo.a,{libInstance:W.a,utils:go.a,locale:e},n.createElement(fn.a,{direction:"column",container:!0,spacing:1},n.createElement(fn.a,{item:!0},n.createElement(io.a,null,Ar),n.createElement(fn.a,{direction:"row",container:!0,spacing:1},n.createElement(fn.a,{item:!0,style:{width:240}},n.createElement(fo.a,Object.assign({"aria-label":Pr,value:o.dateStart,onChange:f("dateStart"),KeyboardButtonProps:{"aria-label":Fr},error:void 0!==(null==i?void 0:i.dateStart),helperText:null==i?void 0:i.dateStart},_o))),n.createElement(fn.a,{item:!0,style:{width:200}},n.createElement(vo.a,Object.assign({"aria-label":Gs,value:o.timeStart,onChange:f("timeStart"),KeyboardButtonProps:{"aria-label":Rr},error:void 0!==(null==i?void 0:i.timeStart),helperText:null==i?void 0:i.timeStart},yo))))),n.createElement(fn.a,{item:!0},n.createElement(io.a,null,Hs),n.createElement(fn.a,{direction:"row",container:!0,spacing:1},n.createElement(fn.a,{item:!0,style:{width:240}},n.createElement(fo.a,Object.assign({"aria-label":Lr,value:o.dateEnd,onChange:f("dateEnd"),KeyboardButtonProps:{"aria-label":zr},error:void 0!==(null==i?void 0:i.dateEnd),helperText:null==i?void 0:i.dateEnd},_o))),n.createElement(fn.a,{item:!0,style:{width:200}},n.createElement(vo.a,Object.assign({"aria-label":Ir,value:o.timeEnd,onChange:f("timeEnd"),KeyboardButtonProps:{"aria-label":Mr},error:void 0!==(null==i?void 0:i.timeEnd),helperText:null==i?void 0:i.timeEnd},yo))))),n.createElement(fn.a,{container:!0,item:!0,direction:"column"},n.createElement(fn.a,{item:!0,container:!0,xs:!0,alignItems:"center"},n.createElement(fn.a,{item:!0,xs:1},n.createElement(lo.a,{checked:o.fixed,inputProps:{"aria-label":$r},color:"primary",onChange:m("fixed")})),n.createElement(fn.a,{item:!0,xs:!0},n.createElement(Bn.a,null,$r)))),n.createElement(fn.a,{item:!0},n.createElement(io.a,null,kr),n.createElement(fn.a,{direction:"row",container:!0,spacing:1},n.createElement(fn.a,{item:!0,style:{width:150}},n.createElement(mo.a,{disabled:o.fixed,type:"number",onChange:m("duration.value"),value:o.duration.value,error:void 0!==(null===(p=null==i?void 0:i.duration)||void 0===p?void 0:p.value),helperText:null===(h=null==i?void 0:i.duration)||void 0===h?void 0:h.value})),n.createElement(fn.a,{item:!0,style:{width:150}},n.createElement(Ni.a,{disabled:o.fixed,options:[{id:"seconds",name:Sr},{id:"minutes",name:Or},{id:"hours",name:jr}],selectedOptionId:o.duration.unit,onChange:m("duration.unit")})))),n.createElement(fn.a,{item:!0},n.createElement(mo.a,{value:o.comment,onChange:m("comment"),multiline:!0,label:cr,fullWidth:!0,rows:3,error:void 0!==(null==i?void 0:i.comment),helperText:null==i?void 0:i.comment})),b&&n.createElement(fn.a,{container:!0,item:!0,direction:"column"},n.createElement(fn.a,{item:!0,container:!0,xs:!0,alignItems:"center"},n.createElement(fn.a,{item:!0,xs:1},n.createElement(lo.a,{checked:o.downtimeAttachedResources,inputProps:{"aria-label":Yr},color:"primary",onChange:m("downtimeAttachedResources")})),n.createElement(fn.a,{item:!0,xs:!0},n.createElement(Bn.a,null,Yr)))))))};const ko=e=>{const t=new Date(e.timeStart),a=new Date(e.dateStart);a.setHours(t.getHours()),a.setMinutes(t.getMinutes()),a.setSeconds(0);const n=new Date(e.timeEnd),r=new Date(e.dateEnd);return r.setHours(n.getHours()),r.setMinutes(n.getMinutes()),r.setSeconds(0),[a,r]},So=X.c().shape({dateStart:X.d().required(bs).nullable(),timeStart:X.d().required(bs).nullable(),dateEnd:X.d().required(bs).nullable(),timeEnd:X.d().required(bs).nullable(),fixed:X.a(),duration:X.c().when("fixed",(e,t)=>e?t:t.shape({value:X.d().required(bs),unit:X.d().required(bs)})),comment:X.d().required(bs)}),Oo=e=>{const t={};if(e.dateStart&&e.timeStart&&e.dateEnd&&e.timeEnd){const[a,n]=ko(e);a>=n&&(t.dateEnd=Cr)}return t};var jo=({resources:e,onClose:t,onSuccess:a})=>{const{cancel:r,token:s}=Object(_l.a)(),{showMessage:l}=Object(En.a)(),i=e=>l({message:e,severity:_n.a.error}),[o,c]=n.useState(!1),[m,d]=n.useState("en"),[u,p]=n.useState(null),h=new Date,g=new Date(h.getTime()+72e5),b=Object(so.a)({initialValues:{dateStart:h,timeStart:h,dateEnd:g,timeEnd:g,fixed:!0,duration:{value:3600,unit:"seconds"},comment:"",downtimeAttachedResources:!0},onSubmit:(t,{setSubmitting:n})=>{n(!0);const[r,o]=ko(t),c={seconds:1,minutes:60,hours:3600},m=(null==c?void 0:c[t.duration.unit])||1,d=t.duration.value*m;(({resources:e,params:t,cancelToken:a})=>j.a.post("./api/beta/monitoring/resources/downtime",{resources:Object(Sn.a)(Object(On.a)(["type","id","parent"]),e),downtime:{with_services:t.downtimeAttachedResources,is_fixed:t.fixed,start_time:Object(kn.a)(t.startTime),end_time:Object(kn.a)(t.endTime),duration:t.duration,comment:t.comment}},{cancelToken:a}))({resources:e,params:Object.assign(Object.assign({},t),{startTime:r,endTime:o,duration:d}),cancelToken:s}).then(()=>{l({message:Ks,severity:_n.a.success}),a()}).catch(()=>i(nl)).finally(()=>n(!1))},validationSchema:So,validate:Oo}),f=e.length>0;return n.useEffect(()=>{f&&Rn(s).then(e=>{b.setFieldValue("comment",`${Jr} ${e.username}`),d(e.locale),p(e.timezone)}).catch(()=>i(nl)).finally(()=>c(!0))},[f]),n.useEffect(()=>()=>r(),[]),0===e.length?null:n.createElement(wo,{locale:m,timezone:u,resources:e,onConfirm:b.submitForm,onCancel:t,canConfirm:b.isValid,errors:b.errors,values:b.values,handleChange:b.handleChange,setFieldValue:b.setFieldValue,submitting:b.isSubmitting,loading:!o})};const Co=e=>n.createElement(Ci.a,Object.assign({variant:"contained",color:"primary",size:"small"},e));var Io=({disabled:e,resourcesToAcknowledge:t,onPrepareToAcknowledge:a,onCancelAcknowledge:r,resourcesToSetDowntime:s,onPrepareToSetDowntime:l,onCancelSetDowntime:i,resourcesToCheck:o,onPrepareToCheck:c,onSuccess:m})=>{const{cancel:d,token:u}=Object(_l.a)(),{showMessage:p}=Object(En.a)(),h=o.length>0;return n.useEffect(()=>{h&&(({resources:e,cancelToken:t})=>{const a=t=>e.filter(({type:e})=>e===t).map(Fn);return j.a.all([{params:a("host"),endpoint:Cn},{params:a("service"),endpoint:In}].filter(({params:e})=>e.length>0).map(({endpoint:e,params:a})=>j.a.post(e,a,{cancelToken:t})))})({resources:o,cancelToken:u}).then(()=>{p({message:Xs,severity:_n.a.success}),m()}).catch(()=>p({message:nl,severity:_n.a.error}))},[o]),n.useEffect(()=>()=>d(),[]),n.createElement(fn.a,{container:!0,spacing:1},n.createElement(fn.a,{item:!0},n.createElement(Co,{disabled:e,startIcon:n.createElement(qn.a,null),onClick:a},ar)),n.createElement(fn.a,{item:!0},n.createElement(Co,{disabled:e,startIcon:n.createElement(er,null),onClick:l},qr)),n.createElement(fn.a,{item:!0},n.createElement(Co,{disabled:e,startIcon:n.createElement(Hn.a,null),onClick:c},Zr)),n.createElement(ho,{resources:t,onClose:r,onSuccess:m}),n.createElement(jo,{resources:s,onClose:i,onSuccess:m}))},xo=a(797),No=a.n(xo),To=a(796),Do=a.n(To),Ao=a(795),Po=a.n(Ao);const Lo=({enabledAutorefresh:e,toggleAutorefresh:t})=>{const a=e?Cs:Is;return n.createElement(hi,{ariaLabel:a,title:a,onClick:t,size:"small"},e?n.createElement(Po.a,null):n.createElement(Do.a,null))};var Fo=({disabledRefresh:e,enabledAutorefresh:t,onRefresh:a,toggleAutorefresh:r})=>n.createElement(fn.a,{container:!0,spacing:1},n.createElement(fn.a,{item:!0},n.createElement(hi,{title:js,ariaLabel:js,disabled:e,onClick:a,size:"small"},n.createElement(No.a,null))),n.createElement(fn.a,{item:!0},n.createElement(Lo,{enabledAutorefresh:t,toggleAutorefresh:r}))),Ro=a(1393),zo=a(1388),Mo=a(798),$o=a.n(Mo);const Go=e=>[{name:"inDowntime",condition:({in_downtime:e})=>e,color:e.palette.action.inDowntimeBackground},{name:"acknowledged",condition:({acknowledged:e})=>e,color:e.palette.action.acknowledgedBackground}],Bo=Object(Zt.a)(e=>({header:({details:t})=>{if(void 0===t)return{};const a=Go(e).find(({condition:e})=>e({in_downtime:t.downtimes.length>0,acknowledged:!Object(gn.a)(t.acknowledgement)})),n=null==a?void 0:a.color;return{backgroundColor:n?Object(Jl.c)(n,.8):e.palette.common.white}}})),Wo=()=>n.createElement(fn.a,{container:!0,spacing:2,alignItems:"center"},n.createElement(fn.a,{item:!0},n.createElement(El.a,{variant:"circle",width:25,height:25})),n.createElement(fn.a,{item:!0},n.createElement(El.a,{width:250,height:25}))),qo=({details:e})=>{var t;return void 0===e?n.createElement(fn.a,{item:!0,style:{flexGrow:1}},n.createElement(Wo,null)):n.createElement(n.Fragment,null,n.createElement(fn.a,{item:!0},e.criticality&&n.createElement(Vn.b,{severityCode:Vn.a.None,label:e.criticality.toString()})),n.createElement(fn.a,{item:!0},n.createElement(Vn.b,{severityCode:e.status.severity_code,label:e.status.name})),n.createElement(fn.a,{item:!0,style:{flexGrow:1}},n.createElement(fn.a,{container:!0,direction:"column"},n.createElement(fn.a,{item:!0},n.createElement(Bn.a,null,e.display_name)),e.parent&&n.createElement(fn.a,{item:!0,container:!0,spacing:1},n.createElement(fn.a,{item:!0},n.createElement(Vn.b,{severityCode:null===(t=e.parent.status)||void 0===t?void 0:t.severity_code})),n.createElement(fn.a,{item:!0},n.createElement(Bn.a,{variant:"caption"},e.parent.name))))))};var Uo=({details:e,onClickClose:t})=>{const a=Bo({details:e});return n.createElement(fn.a,{container:!0,item:!0,spacing:2,alignItems:"center",className:a.header},n.createElement(qo,{details:e}),n.createElement(fn.a,{item:!0},n.createElement(di.a,{onClick:t},n.createElement($o.a,null))))},Ho=a(1391),Vo=a(1401),Ko=a(1392),Xo=a(1408),Qo=a(1390),Jo=a(1386),Yo=a(1387),Zo=a(800),ec=a.n(Zo),tc=a(1389);const ac=Object(Zt.a)(e=>{const t=t=>Object(Vn.c)({theme:e,severityCode:t}).backgroundColor;return{card:({severityCode:e})=>Object.assign({},e&&{borderWidth:2,borderStyle:"solid",borderColor:t(e)}),title:({severityCode:e})=>Object.assign({},e&&{color:t(e)})}});var nc=({title:e,content:t,severityCode:a})=>{const r=ac({severityCode:a}),[s,l]=n.useState(!1),i=t.split(/\n|\\n/),o=i.slice(0,3),c=i.slice(2,i.length),m=(e,t)=>n.createElement(Bn.a,{key:`${e}-${t}`,variant:"body2",component:"p"},e);return n.createElement(Jo.a,{className:r.card},n.createElement(Yo.a,null,n.createElement(Bn.a,{className:r.title,variant:"subtitle2",color:"textSecondary",gutterBottom:!0},e),o.map(m),s&&c.map(m)),c.length>0&&n.createElement(n.Fragment,null,n.createElement(zo.a,null),n.createElement(tc.a,null,n.createElement(Ci.a,{color:"primary",size:"small",onClick:()=>{l(!s)}},s?rs:Os))))};const rc=e=>n.createElement(Bn.a,{key:e,variant:"body2",component:"p"},e);var sc=({title:e,contentLines:t,chip:a})=>n.createElement(Jo.a,null,n.createElement(Yo.a,null,n.createElement(fn.a,{container:!0,spacing:4,alignItems:"center"},n.createElement(fn.a,{item:!0},n.createElement(Bn.a,{variant:"subtitle2",color:"textSecondary"},e)),n.createElement(fn.a,{item:!0,style:{flexGrow:1}},t.map(rc)),n.createElement(fn.a,{item:!0},a))));var lc=({title:e,lines:t})=>n.createElement(Jo.a,{style:{height:"100%"}},n.createElement(Yo.a,null,n.createElement(Bn.a,{variant:"subtitle2",color:"textSecondary",gutterBottom:!0},e),n.createElement(fn.a,{direction:"column",container:!0,spacing:1},t.map(({key:e,line:t})=>n.createElement(fn.a,{item:!0,key:e},t))))),ic=a(799),oc=a.n(ic);const cc=({line:e})=>n.createElement(Bn.a,{component:"div"},n.createElement(Hi.a,{fontWeight:500,lineHeight:1},e)),mc=Object(Zt.a)(e=>({activeIcon:{color:e.palette.success.main}})),dc=()=>{const e=mc();return n.createElement(fn.a,{container:!0,spacing:1,alignItems:"center"},n.createElement(fn.a,{item:!0},n.createElement(oc.a,{className:e.activeIcon})),n.createElement(fn.a,{item:!0},n.createElement(cc,{key:"tries",line:lr})))};var uc=e=>{const t=({label:e,field:t})=>({title:e,field:t,getLines:()=>{return[{key:e+"_date",line:n.createElement(cc,{line:(a=t,Ol({isoDate:a,to:"MM/dd/yyyy"}))})},{key:e+"_time",line:n.createElement(cc,{key:"tries",line:Cl(t)})}];var a}}),a=({label:a,field:r})=>Object.assign(Object.assign({},t({label:a,field:r})),{getLines:()=>[...t({label:a,field:r}).getLines(),{key:a+"_active",line:e.active_checks||e.is_active_check?n.createElement(dc,null):null}]});return[{title:gs,field:e.poller_name,getLines:()=>[{key:"poller",line:n.createElement(cc,{line:e.poller_name})}]},{title:Us,field:e.timezone,getLines:()=>[{key:"timezone",line:n.createElement(cc,{line:e.timezone})}]},{title:Er,field:e.duration,getLines:()=>[{key:"duration",line:n.createElement(cc,{line:e.duration})},{key:"tries",line:n.createElement(cc,{key:"tries",line:e.tries})}]},t({label:as,field:e.last_state_change}),a({label:es,field:e.last_check}),a({label:ss,field:e.next_check}),{title:hr,field:e.execution_time,getLines:()=>[{key:"check_duration",line:n.createElement(cc,{line:e.execution_time+" s"})}]},{title:ns,field:e.latency,getLines:()=>[{key:"latency",line:n.createElement(cc,{line:e.latency+" s"})}]},{title:Tr,field:e.flapping,getLines:()=>[{key:"flapping",line:n.createElement(cc,{line:e.flapping?al:ls})}]},{title:ds,field:e.percent_state_change,getLines:()=>[{key:"percent_state_change",line:n.createElement(cc,{line:e.percent_state_change+"%"})}]},t({label:ts,field:e.last_notification}),{title:vr,field:e.notification_number,getLines:()=>[{key:"notification_number",line:n.createElement(cc,{line:e.notification_number.toString()})}]}]};const pc=Object(jt.a)(El.a)(()=>({transform:"none"})),hc=()=>n.createElement(fn.a,{container:!0,spacing:2,direction:"column"},n.createElement(fn.a,{item:!0},n.createElement(pc,{height:120})),n.createElement(fn.a,{item:!0},n.createElement(pc,{height:75})),n.createElement(fn.a,{item:!0},n.createElement(pc,{height:75})));var gc=({details:e})=>{var t;const{showMessage:a}=Object(En.a)();if(void 0===e)return n.createElement(hc,null);return n.createElement(fn.a,{container:!0,direction:"column",spacing:2},n.createElement(fn.a,{item:!0,container:!0,direction:"column",spacing:2},n.createElement(fn.a,{item:!0},n.createElement(nc,{title:qs,content:e.output,severityCode:e.status.severity_code})),null===(t=e.downtimes)||void 0===t?void 0:t.map(({start_time:e,end_time:t})=>n.createElement(fn.a,{item:!0},n.createElement(sc,{title:wr,contentLines:[{prefix:Ar,time:e},{prefix:Hs,time:t}].map(({prefix:e,time:t})=>`${e} ${jl(t)}`),chip:n.createElement(Rl,null)}))),e.acknowledgement&&n.createElement(fn.a,{item:!0},n.createElement(sc,{title:nr,contentLines:[`${e.acknowledgement.author_name} ${sr} ${jl(e.acknowledgement.entry_time)}`],chip:n.createElement(zl,null)}))),n.createElement(fn.a,{item:!0,container:!0,spacing:2,alignItems:"stretch"},uc(e).map(({title:e,field:t,getLines:a})=>!Object(gn.a)(t)&&n.createElement(fn.a,{key:e,item:!0,xs:6},n.createElement(lc,{title:e,lines:a()})))),e.performance_data&&n.createElement(fn.a,{item:!0},n.createElement(nc,{title:us,content:e.performance_data})),e.command_line&&n.createElement(fn.a,{item:!0},n.createElement(Jo.a,null,n.createElement(Yo.a,null,n.createElement(Bn.a,{variant:"subtitle2",color:"textSecondary",gutterBottom:!0},n.createElement(fn.a,{container:!0,alignItems:"center",spacing:1},n.createElement(fn.a,{item:!0},gr),n.createElement(fn.a,{item:!0},n.createElement(Dl.a,{onClick:()=>{try{(e=>{const t=document.createElement("textarea");document.body.appendChild(t),t.value=e,t.select(),document.execCommand("copy"),document.body.removeChild(t)})(e.command_line),a({message:fr,severity:_n.a.success})}catch(e){a({message:nl,severity:_n.a.error})}},title:br},n.createElement(di.a,{size:"small"},n.createElement(ec.a,{color:"primary",fontSize:"small"})))))),n.createElement(Bn.a,{variant:"body2"},e.command_line)))))},bc=a(809),fc=a(485);const vc={name:Hr,id:"last_24_h",getStart:()=>Object(bc.a)(Date.now(),24),timeFormat:"HH:mm"},Ec=[vc,{name:Vr,id:"last_7_days",getStart:()=>Object(fc.a)(Date.now(),7),timeFormat:"MM/dd HH:mm"},{name:Kr,id:"last_31_days",getStart:()=>Object(fc.a)(Date.now(),31),timeFormat:"MM/dd"}],_c=Object(Zt.a)(e=>({container:{display:"grid",gridTemplateRows:"auto 1fr",gridRowGap:e.spacing(2)},header:{padding:e.spacing(2)},periodSelect:{width:250},graphContainer:{display:"grid",padding:e.spacing(2,1,0),gridTemplateRows:"250px 100px"},graph:{margin:"auto",height:"100%"},performance:{width:"100%"},status:{marginTop:e.spacing(2),width:"100%"}})),yc=Object(Sn.a)(Object(On.a)(["id","name"]),Ec),wc=vc;const kc=[{id:0,Component:gc,title:_r,visible:()=>!0},{id:1,Component:({endpoints:e})=>{const t=_c(),{performanceGraph:a}=e,[r,s]=n.useState(wc),l=e=>{const t=new Date(Date.now()).toISOString();return`?start=${e.getStart().toISOString()}&end=${t}`},[i,o]=n.useState(l(r));return n.createElement("div",{className:t.container},n.createElement(pl.a,{className:t.header},n.createElement(Ni.a,{className:t.periodSelect,options:yc,selectedOptionId:r.id,onChange:e=>{const t=e.target.value,a=(n=t,Object(Xo.a)(Object(Qo.a)("id",n))(Ec));var n;s(a);const r=l(a);o(r)}})),n.createElement(pl.a,{className:t.graphContainer},n.createElement("div",{className:`${t.graph} ${t.performance}`},n.createElement(mi,{endpoint:`${a}${i}`,xAxisTickFormat:r.timeFormat}))))},title:Gr,visible:({statusGraph:e,performanceGraph:t})=>!Object(gn.a)(t)||!Object(gn.a)(e)}],Sc=({id:e,details:t,endpoints:a})=>{const{Component:r}=Object(Xo.a)(Object(Qo.a)("id",e),kc);return n.createElement(r,{details:t,endpoints:a})},Oc=Object(Zt.a)(e=>({body:{display:"grid",gridTemplateRows:"auto 1fr",height:"100%"},contentContainer:{backgroundColor:e.palette.background.default,position:"relative"},contentTab:{position:"absolute",bottom:0,left:0,right:0,top:0,overflowY:"auto",overflowX:"hidden",padding:10}}));var jc=({details:e,endpoints:t,openTabId:a,onSelectTab:r})=>{const s=Oc();return n.createElement("div",{className:s.body},n.createElement(Ho.a,{position:"static",color:"default"},n.createElement(Vo.a,{variant:"fullWidth",value:a,indicatorColor:"primary",textColor:"primary",onChange:(e,t)=>{r(t)}},kc.filter(({visible:e})=>e(t)).map(({id:t,title:a})=>n.createElement(Ko.a,{key:t,label:a,disabled:void 0===e})))),n.createElement("div",{className:s.contentContainer},n.createElement("div",{className:s.contentTab},n.createElement(Sc,{id:a,details:e,endpoints:t}))))};const Cc=Object(Zt.a)(()=>({details:{height:"100%",display:"grid",gridTemplate:"auto auto 1fr / 1fr"},header:{gridArea:"1 / 1 / 2 / 1",padding:8},divider:{gridArea:"2 / 1 / 3 / 1"},body:{gridArea:"3 / 1 / 4 / 1"}}));var Ic=({endpoints:e,onClose:t,openTabId:a,onSelectTab:r})=>{const s=Cc(),[l,i]=n.useState(),{details:o}=e,c=Zl({onSuccess:e=>i(e),endpoint:o});return n.useEffect(()=>{void 0!==l&&i(void 0),c()},[o]),n.createElement(pl.a,{elevation:5,className:s.details},n.createElement("div",{className:s.header},n.createElement(Uo,{details:l,onClickClose:t})),n.createElement(zo.a,{className:s.divider}),n.createElement("div",{className:s.body},n.createElement(jc,{details:l,endpoints:Object(Ro.a)(["details"],e),openTabId:a,onSelectTab:r})))},xc=a(1362);var Nc=()=>n.createElement(n.Fragment,null,n.createElement("p",{style:{margin:0}},sl+"."),n.createElement("p",{style:{margin:0}},ll+" : /opt/rh/httpd24/root/etc/httpd/conf.d/10-centreon.conf"),n.createElement("p",{style:{margin:0}},n.createElement(xc.a,{href:"https://docs.centreon.com/20.04/en/upgrade/upgrade-from-19-10.html#configure-apache-api-access",target:"_blank",color:"inherit"},`( ${il} )`)));const Tc=Wi;let Dc;const Ac=()=>{if(!Object(gn.a)(Dc))return Dc;const e=localStorage.getItem("centreon-events-filter");return Object(gn.a)(e)?Tc:(Dc=JSON.parse(e),Dc)},Pc=()=>Ac(),Lc=()=>Pc().criterias,Fc=()=>Pc().search;var Rc=()=>{const[e,t]=n.useState(Ac()),[a,r]=n.useState(Fc()),[s,l]=n.useState(Fc()),[i,o]=n.useState(Lc().resourceTypes),[c,m]=n.useState(Lc().states),[d,u]=n.useState(Lc().statuses),[p,h]=n.useState(Lc().hostGroups),[g,b]=n.useState(Lc().serviceGroups);return n.useEffect(()=>{(e=>{localStorage.setItem("centreon-events-filter",JSON.stringify(e))})(Object.assign(Object.assign({},e),{search:s,criterias:{resourceTypes:i,states:c,statuses:d,hostGroups:p,serviceGroups:g}}))},[e,s,i,c,d,p,g]),n.useEffect(()=>()=>{Dc=null}),{filter:e,setFilter:t,currentSearch:a,setCurrentSearch:r,nextSearch:s,setNextSearch:l,resourceTypes:i,setResourceTypes:o,states:c,setStates:m,statuses:d,setStatuses:u,hostGroups:p,setHostGroups:h,serviceGroups:g,setServiceGroups:b}};const zc=Object(Zt.a)(e=>({page:{display:"grid",gridTemplateRows:"auto 1fr",backgroundColor:e.palette.background.default,overflowY:"hidden"},body:{display:"grid",gridTemplateRows:"1fr",gridTemplateColumns:"1fr 550px"},panel:{gridArea:"1 / 2",zIndex:3},filter:{zIndex:4},listing:{marginLeft:e.spacing(2),marginRight:e.spacing(2),gridArea:"1 / 1 / 1 / span 2"}}));var Mc=Object(wn.b)(()=>{const e=zc(),t=Object(bn.a)(),[a,r]=n.useState(),[l,i]=n.useState([]),[o,c]=n.useState([]),[m,d]=n.useState([]),[u,p]=n.useState([]),[h,g]=n.useState("asc"),[b,f]=n.useState("status_severity_code"),[v,E]=n.useState(30),[_,y]=n.useState(1),{filter:w,setFilter:k,currentSearch:S,setCurrentSearch:O,nextSearch:C,setNextSearch:I,resourceTypes:x,setResourceTypes:N,states:T,setStates:D,statuses:A,setStatuses:P,hostGroups:L,setHostGroups:F,serviceGroups:R,setServiceGroups:z}=Rc(),[M,$]=n.useState(null),[G,B]=n.useState(0),[W,q]=n.useState(!0),[U,H]=n.useState(!0),V=Object(s.useSelector)(e=>1e3*e.intervals.AjaxTimeReloadMonitoring),K=n.useRef(),{showMessage:X}=Object(En.a)(),Q=e=>X({message:e,severity:_n.a.error}),[J]=n.useState(j.a.CancelToken.source()),Y=()=>{q(!0);const e=b?{[b]:h}:void 0;((e,t={})=>Ln({endpoint:Dn(e),requestParams:t}))({states:T.map(({id:e})=>e),statuses:A.map(({id:e})=>e),resourceTypes:x.map(({id:e})=>e),hostGroupIds:null==L?void 0:L.map(({id:e})=>e),serviceGroupIds:null==R?void 0:R.map(({id:e})=>e),sort:e,limit:v,page:_,search:S},{cancelToken:J.token}).then(e=>{r(e)}).catch(e=>{var t,a,n;r(void 0),404===(null===(t=e.response)||void 0===t?void 0:t.status)?Q(Nc):Q((null===(n=null===(a=e.response)||void 0===a?void 0:a.data)||void 0===n?void 0:n.message)||nl)}).finally(()=>q(!1))},Z=()=>{window.clearInterval(K.current);const e=U?window.setInterval(Y,V):void 0;K.current=e},ee=()=>{Z(),Y()};n.useEffect(()=>()=>{J.cancel(),clearInterval(K.current)},[]),n.useEffect(()=>{ee()},[b,h,_,v,S,T,A,x,L,R]),n.useEffect(()=>{Z()},[U]);const te=()=>{k({id:"",name:""})},ae=e=>{i(e)},ne=e=>{c(e)},re=e=>{d(e)},se=e=>{p(e)},le=(ie={onAcknowledge:e=>{ne([e])},onDowntime:e=>{re([e])},onCheck:e=>{se([e])},onDisplayGraph:({details_endpoint:e,status_graph_endpoint:t,performance_graph_endpoint:a})=>{B(1),$({details:e,statusGraph:t,performanceGraph:a})}},[{id:"severity",label:"S",type:Kn.a.component,Component:vi,sortField:"severity_level",width:50},{id:"status",label:ys,type:Kn.a.component,Component:_i(ie),sortField:"status_severity_code",clickable:!0,width:145},{id:"resource",label:Es,type:Kn.a.component,Component:yi,sortField:"name",width:200},{id:"parent_resource",label:"",type:Kn.a.component,Component:wi,sortable:!1,width:200},{id:"graph",label:"",type:Kn.a.component,Component:bi({onClick:ie.onDisplayGraph}),sortable:!1,width:50},{id:"duration",label:kr,type:Kn.a.string,getFormattedString:({duration:e})=>e,sortField:"last_status_change",width:125},{id:"tries",label:ks,type:Kn.a.string,getFormattedString:({tries:e})=>e,width:125},{id:"last_check",label:es,type:Kn.a.string,getFormattedString:({last_check:e})=>e,width:125},{id:"information",label:Ss,type:Kn.a.string,getFormattedString:Object(zn.a)(Object(Mn.a)("","information"),Object($n.a)("\n"),Gn.a)},{id:"state",label:Bs,type:Kn.a.component,Component:Bl,sortable:!1,width:80}]);var ie;const oe=l.length>0,ce=n.createElement(fn.a,{container:!0},n.createElement(fn.a,{item:!0},n.createElement(Io,{disabled:!oe,resourcesToAcknowledge:o,onPrepareToAcknowledge:()=>{ne(l)},onCancelAcknowledge:()=>{ne([])},resourcesToSetDowntime:m,onPrepareToSetDowntime:()=>{re(l)},onCancelSetDowntime:()=>{re([])},resourcesToCheck:u,onPrepareToCheck:()=>{se(l)},onSuccess:()=>{ae([]),c([]),d([]),p([])}})),n.createElement(fn.a,{item:!0,style:{paddingLeft:t.spacing(3)}},n.createElement(Fo,{disabledRefresh:W,enabledAutorefresh:U,onRefresh:ee,toggleAutorefresh:()=>{H(!U)}})));return n.createElement("div",{className:e.page},n.createElement("div",{className:e.filter},n.createElement(ro,{filter:w,onFilterGroupChange:e=>{const t=e.target.value,a=Ui[t];k(a),a.criterias&&(N(a.criterias.resourceTypes),P(a.criterias.statuses),D(a.criterias.states))},selectedResourceTypes:x,onResourceTypesChange:(e,t)=>{N(t),te()},selectedStates:T,onStatesChange:(e,t)=>{D(t),te()},selectedStatuses:A,onStatusesChange:(e,t)=>{P(t),te()},onSearchRequest:()=>{S===C&&Y(),O(C)},onSearchPrepare:e=>{I(e.target.value)},currentSearch:S,nextSearch:C,onHostGroupsChange:(e,t)=>{F(t)},selectedHostGroups:L,onServiceGroupsChange:(e,t)=>{z(t)},selectedServiceGroups:R,onClearAll:()=>{k(Bi),N(Bi.criterias.resourceTypes),P(Bi.criterias.statuses),D(Bi.criterias.states)}})),n.createElement("div",{className:e.body},M&&n.createElement(vn.a,{direction:"left",in:!Object(gn.a)(M),timeout:{enter:150,exit:50}},n.createElement("div",{className:e.panel},n.createElement(Ic,{endpoints:M,openTabId:G,onClose:()=>{$(null)},onSelectTab:e=>{B(e)}}))),n.createElement("div",{className:e.listing},n.createElement(yn.a,{checkable:!0,Actions:ce,loading:W,columnConfiguration:le,tableData:null==a?void 0:a.result,currentPage:_-1,rowColorConditions:Go(t),limit:null==a?void 0:a.meta.limit,onSort:({order:e,orderBy:t})=>{f(t),g(e)},onPaginationLimitChanged:e=>{E(Number(e.target.value))},onPaginate:(e,t)=>{y(t+1)},sortf:b,sorto:h,totalRows:null==a?void 0:a.meta.total,onSelectRows:ae,selectedRows:l,onRowClick:({details_endpoint:e,status_graph_endpoint:t,performance_graph_endpoint:a})=>{Object(gn.a)(a)&&B(0),$({details:e,statusGraph:t,performanceGraph:a})},innerScrollDisabled:!1}))))});var $c=[{path:Ct.pollerStep1,comp:ra},{path:Ct.pollerStep2,comp:Ea},{path:Ct.pollerStep3,comp:Ia},{path:Ct.remoteServerStep1,comp:Fa},{path:Ct.remoteServerStep2,comp:Ga},{path:Ct.remoteServerStep3,comp:Wa},{path:Ct.serverConfigurationWizard,comp:an},{path:Ct.extensionsManagerPage,comp:dn},{path:Ct.notAllowedPage,comp:hn},{path:Ct.resources,comp:Mc}],Gc=a(1407),Bc=a(803),Wc=a.n(Bc);const qc=e=>e.is_react?e.url:`/main.php?p=${e.page}${null!==e.options?e.options:""}`,Uc=e=>{if(e.url)return qc(e);if(e.groups){const t=e.groups.find(Uc);return t&&t.children?Hc(t):void 0}return e.children?Hc(e):void 0},Hc=e=>{if(!e.children)return;const t=e.children.find(Uc);return t?Uc(t):void 0},Vc=e=>{const t=e.url?qc(e):Uc(e);return t?{label:e.label,link:t}:null};var Kc=Object(F.a)(e=>e.navigation.items,e=>{const t={};return e.forEach(e=>{const a=Vc(e);null!==a&&(t[a.link]=[{label:a.label,link:a.link}],e.children&&e.children.forEach(e=>{const n=Vc(e);null!==n&&(t[n.link]=[{label:a.label,link:a.link},{label:n.label,link:n.link}],e.groups&&e.groups.forEach(e=>{e.children&&e.children.forEach(e=>{const r=Vc(e);null!==r&&(t[r.link]=[{label:a.label,link:a.link},{label:n.label,link:n.link},{label:r.label,link:r.link}])})}))}))}),t});const Xc=Object(Zt.a)(()=>({link:{fontSize:"small",color:"inherit",textDecoration:"none","&:hover":{textDecoration:"underline"}}}));var Qc=({last:e,breadcrumb:t})=>{const a=Xc();return r.a.createElement(xc.a,{className:a.link,color:e?"textPrimary":"inherit",component:L.Link,to:t.link},t.label)};const Jc=Object(Zt.a)({root:{padding:"4px 16px"},item:{display:"flex"}}),Yc=({breadcrumbsByPath:e,path:t})=>{if(e[t])return e[t];if(t.includes("/")){const a=t.split("/").slice(0,-1).join("/");return Yc({breadcrumbsByPath:e,path:a})}return[]};var Zc=Object(s.connect)(e=>({breadcrumbsByPath:Kc(e)}))(({breadcrumbsByPath:e,path:t})=>{const a=Jc(),s=Object(n.useMemo)(()=>Yc({breadcrumbsByPath:e,path:t}),[e,t]);return r.a.createElement(Gc.a,{classes:{root:a.root,li:a.item},separator:r.a.createElement(Wc.a,{fontSize:"small"}),"aria-label":"Breadcrumb"},s.map((e,t)=>r.a.createElement(Qc,{key:`${e.label}-${e.index}`,breadcrumb:e,index:t,last:t===s.length-1})))}),em=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a};const tm=Object(jt.a)("div")(({theme:e})=>({overflow:"auto",height:"100%",display:"grid",gridTemplateRows:"auto 1fr",background:e.palette.background.default})),am=({history:e,allowedPages:t,pages:a})=>{const n=e.createHref({pathname:"/",search:"",hash:""}),s=Object.entries(a);return s.filter(([e])=>(e=>t.find(t=>e.includes(t)))(e)).map(([e,t])=>{const a=r.a.lazy(()=>S(n,t));return r.a.createElement(b.d,{key:e,path:e,exact:!0,render:t=>r.a.createElement(tm,null,r.a.createElement(Zc,{path:e}),r.a.createElement(a,Object.assign({},t)))})})},nm=r.a.memo(({allowedPages:e,history:t,pages:a,externalPagesFetched:s})=>Ot()(e)?null:r.a.createElement(n.Suspense,{fallback:null},r.a.createElement(b.g,null,$c.map(t=>{var{path:a,comp:n}=t,s=em(t,["path","comp"]);return r.a.createElement(b.d,Object.assign({key:a,path:a,exact:!0,render:t=>r.a.createElement(tm,null,e.includes(a)?r.a.createElement(r.a.Fragment,null,r.a.createElement(Zc,{path:a}),r.a.createElement(n,Object.assign({},t))):r.a.createElement(hn,Object.assign({},t)))},s))}),am({history:t,allowedPages:e,pages:a}),s&&r.a.createElement(b.d,{component:hn}))),(e,t)=>v()(e.pages,t.pages)&&v()(e.allowedPages,t.allowedPages)&&v()(e.externalPagesFetched,t.externalPagesFetched));var rm=Object(s.connect)(e=>({allowedPages:z(e),pages:e.externalComponents.pages,externalPagesFetched:e.externalComponents.fetched}))(Object(b.o)(nm));class sm extends n.Component{constructor(e){super(e),this.handleResize=()=>{clearTimeout(this.resizeTimeout),this.mainContainer&&(this.resizeTimeout=setTimeout(()=>{const{clientHeight:e}=this.mainContainer,{contentHeight:t}=this.state;e!==t&&this.setState({loading:!1,contentHeight:e-30})},200))},this.handleHref=e=>{const{href:t}=e.detail;window.history.pushState(null,null,t)},this.handleDisconnect=e=>{window.location.href=e.detail.href},this.mainContainer=null,this.resizeTimeout=null,this.state={contentHeight:0,loading:!0}}componentDidMount(){this.mainContainer=window.document.getElementById("fullscreen-wrapper"),window.addEventListener("resize",this.handleResize),window.addEventListener("react.href.update",this.handleHref,!1),window.addEventListener("react.href.disconnect",this.handleDisconnect,!1)}componentWillUnmount(){clearTimeout(this.resizeTimeout),window.removeEventListener("resize",this.handleResize),window.removeEventListener("react.href.update",this.handleHref),window.removeEventListener("react.href.disconnect",this.handleDisconnect)}render(){const{contentHeight:e,loading:t}=this.state,{history:{location:{search:a,hash:n}}}=this.props;let s;return s=window.fullscreenSearch?window.fullscreenSearch+window.fullscreenHash:(a||"")+(n||""),r.a.createElement(r.a.Fragment,null,t&&r.a.createElement("span",{className:ka.a["main-loader"]},r.a.createElement(Oa,null)),r.a.createElement("iframe",{id:"main-content",title:"Main Content",frameBorder:"0",onLoad:this.handleResize,scrolling:"yes",className:p()({[g.a.hidden]:t}),style:{width:"100%",height:e+"px"},src:"./main.get.php"+s}))}}var lm=sm;var im=Object(b.o)(({history:{location:{key:e}}})=>r.a.createElement(b.g,null,r.a.createElement(b.d,{key:"path-"+e,path:"/main.php",exact:!0,component:lm}),r.a.createElement(b.d,{path:"/",exact:!0,render:()=>r.a.createElement(Redirect,{to:"/main.php"})}),r.a.createElement(b.d,{path:"/",component:rm}))),om=a(483),cm=a.n(om),mm=a(484),dm=a.n(mm);class um extends n.Component{constructor(){super(...arguments),this.state={isFullscreenEnabled:!1},this.keepAliveTimeout=null,this.getMinArgument=()=>{const{search:e}=lt.location;return"1"===m.a.parse(e).min},this.goFull=()=>{window.fullscreenSearch=window.location.search,window.fullscreenHash=window.location.hash,setTimeout(()=>{this.setState({isFullscreenEnabled:!0})},200)},this.removeFullscreenParams=()=>{"/main.php"===lt.location.pathname&&lt.push({pathname:"/main.php",search:window.fullscreenSearch,hash:window.fullscreenHash}),delete window.fullscreenSearch,delete window.fullscreenHash},this.keepAlive=()=>{this.keepAliveTimeout=setTimeout(()=>{C("internal.php?object=centreon_keepalive&action=keepAlive").get().then(()=>this.keepAlive()).catch(e=>{e.response&&401===e.response.status?window.location.href="index.php?disconnect=1":this.keepAlive()})},15e3)}}componentDidMount(){this.props.fetchExternalComponents(),this.keepAlive()}render(){const e=this.getMinArgument();return r.a.createElement(l.a,{history:lt},r.a.createElement(d.a,null,r.a.createElement("div",{className:cm.a.wrapper},!e&&r.a.createElement(bt,null),r.a.createElement(Et,null),r.a.createElement("div",{id:"content",className:dm.a.content},!e&&r.a.createElement(he,null),r.a.createElement("div",{id:"fullscreen-wrapper",className:dm.a["fullscreen-wrapper"]},r.a.createElement(o.a,{enabled:this.state.isFullscreenEnabled,onClose:this.removeFullscreenParams,onChange:e=>{this.setState({isFullscreenEnabled:e})}},r.a.createElement("div",{className:cm.a["main-content"]},r.a.createElement(im,null)))),!e&&r.a.createElement(kt,null)),r.a.createElement("span",{className:yt.a["full-screen"],onClick:this.goFull}))))}}var pm=Object(s.connect)(null,e=>({fetchExternalComponents:()=>{e(Xe())}}))(um);const hm=C("internal.php?object=centreon_i18n&action=translation"),gm=C("internal.php?object=centreon_topcounter&action=user");const bm=it();class fm extends n.Component{constructor(){super(...arguments),this.state={translationsLoaded:!1},this.componentDidMount=()=>{((e,t)=>{const a=gm.get(),n=hm.get();Promise.all([a,n]).then(a=>{let{locale:n}=a[0].data;n=null!==n?n.slice(0,2):navigator.language;const r=a[1].data;Object(P.syncTranslationWithStore)(e),e.dispatch(Object(P.loadTranslations)(r)),e.dispatch(Object(P.setLocale)(n)),t()}).catch(e=>{e.response&&401===e.response.status&&(window.location.href="index.php?disconnect=1")})})(bm,this.finishLoading)},this.finishLoading=()=>{this.setState({translationsLoaded:!0})}}render(){const{translationsLoaded:e}=this.state;return e&&r.a.createElement(s.Provider,{store:bm},r.a.createElement(pm,null))}}var vm=fm,Em=function(e,t,a,n){return new(a||(a=Promise))((function(r,s){function l(e){try{o(n.next(e))}catch(e){s(e)}}function i(e){try{o(n.throw(e))}catch(e){s(e)}}function o(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(l,i)}o((n=n.apply(e,t||[])).next())}))};!function(){Em(this,void 0,void 0,(function*(){window.React=yield a.e(2).then(a.t.bind(null,0,7)),window.ReactDOM=window.ReactDom=yield a.e(2).then(a.t.bind(null,25,7)),window.PropTypes=window.PropTypes=yield a.e(2).then(a.t.bind(null,3,7)),window.ReactRouterDOM=window.ReactRouterDom=yield a.e(2).then(a.bind(null,31)),window.ReactRedux=yield a.e(2).then(a.bind(null,20)),window.ReduxForm=yield a.e(2).then(a.bind(null,179)),window.ReactReduxI18n=yield a.e(2).then(a.t.bind(null,4,7)),window.ReactDOM.render(React.createElement(vm,null),document.getElementById("root"))}))}()},176:function(e,t,a){e.exports={"progress-bar":"progress-bar__8tltI","progress-bar-items":"progress-bar-items__11rFW","progress-bar-item":"progress-bar-item__1crhI","progress-bar-link":"progress-bar-link__1QJN1",active:"active__309Tj",prev:"prev__18K_k"}},284:function(e,t,a){e.exports={"main-loader":"main-loader__3-NwJ","ball-grid-pulse":"ball-grid-pulse__cyxVh","loader-inner":"loader-inner__Iq4vn"}},472:function(e,t,a){e.exports={tooltip:"tooltip__1QOEk",hidden:"hidden__2Mvg5",sidebar:"sidebar__xJugW",active:"active__2yY0O",fadeIn:"fadeIn__3E3jv"}},483:function(e,t,a){e.exports={"message-alert":"message-alert__nSdrs","icon-home":"icon-home__1Xuuz","icon-monitoring":"icon-monitoring__39A-u","icon-reporting":"icon-reporting__3xHzc","icon-configuration":"icon-configuration__5xV9t","icon-administration":"icon-administration__34XD4","icon-poller":"icon-poller__2R4D9","icon-link":"icon-link__2OGi_","icon-clock":"icon-clock__1K6Y3","icon-database":"icon-database__1D7tU","icon-hosts":"icon-hosts__1utH5","icon-services":"icon-services__1J5QY","icon-user":"icon-user__3mRYM","icon-copy":"icon-copy__36oq_","icon-copied":"icon-copied__3Raj3",iconmoon:"iconmoon__3eD8I",wrapper:"wrapper__3tfS0","main-content":"main-content__3dflI",content:"content__31HC2","fullscreen-wrapper":"fullscreen-wrapper__xsUj7","mb-2":"mb-2__GCuAB","list-unstyled":"list-unstyled__Fc0X7","half-opacity":"half-opacity__hqyE3",hidden:"hidden__3gHh5","hidden-input":"hidden-input__dUBXg",form:"form__3yC0S","form-wrapper":"form-wrapper__1DYYm","invalid-feedback":"invalid-feedback__1tgXO",field__msg:"field__msg__14g9Y","css-1aya2g8":"css-1aya2g8__3IRtJ","css-2o5izw":"css-2o5izw__1dYIq",installation:"installation__1rxB2","form-text":"form-text__1M1WV","form-status":"form-status__3eeru",valid:"valid__3Bimo",failed:"failed__wL-2X","form-error-message":"form-error-message__2yqyn","form-group":"form-group__jc8xa","form-control":"form-control__BgkZM",select:"select__1aeIv","form-heading":"form-heading__1ahDr","form-title":"form-title__2DZLR","form-item":"form-item__1WCSu","form-buttons":"form-buttons__w23dq",button:"button__1pw2M","custom-checkbox":"custom-checkbox__FIW8h","custom-radio":"custom-radio__2qaDi","custom-control":"custom-control__MWBMP","form-check-input":"form-check-input__1Vvxj","custom-control-input":"custom-control-input__PzGrs","custom-control-label":"custom-control-label__13YcD","error-block":"error-block__1viNc","css-10odw4q":"css-10odw4q__1jdsI","css-1492t68":"css-1492t68__V1hPK","css-10nd86i":"css-10nd86i__2Pj_D"}},484:function(e,t,a){e.exports={wrapper:"wrapper__1Aavj","main-content":"main-content__HW0Dt",content:"content__BIgod","fullscreen-wrapper":"fullscreen-wrapper__2lljA"}},770:function(e,t,a){e.exports={"message-alert":"message-alert__27NUA"}},856:function(e,t,a){a(857),e.exports=a(1306)},9:function(e,t,a){e.exports={"mb-2":"mb-2__3s6QC","list-unstyled":"list-unstyled__3fr_w","half-opacity":"half-opacity__1MJr-",hidden:"hidden__1F4NB","hidden-input":"hidden-input__2Rjcf",form:"form__15zKN","form-wrapper":"form-wrapper__2X07j","invalid-feedback":"invalid-feedback__QEEu7",field__msg:"field__msg__29i1a","css-1aya2g8":"css-1aya2g8__3pl51","css-2o5izw":"css-2o5izw__MTmfs",installation:"installation__2vbiU","form-text":"form-text__3lGCh","form-status":"form-status__17jVY",valid:"valid__2F-il",failed:"failed__3mfhM","form-error-message":"form-error-message__25vyx","form-group":"form-group__Q553m","form-control":"form-control__CSLV-",select:"select__2uEX6","form-heading":"form-heading__3ltDi","form-title":"form-title__2ExDS","form-item":"form-item__1QES-","form-buttons":"form-buttons__3qiND",button:"button__3ekqP","custom-checkbox":"custom-checkbox__2eWQE","custom-radio":"custom-radio__1-m5G","custom-control":"custom-control__18t1p","form-check-input":"form-check-input__35FeC","custom-control-input":"custom-control-input__2Sdwq","custom-control-label":"custom-control-label__3bxFs","error-block":"error-block__z8Cr2","css-10odw4q":"css-10odw4q__3Izaz","css-1492t68":"css-1492t68__qDHrp","css-10nd86i":"css-10nd86i__3eCL4"}},91:function(e,t,a){e.exports={"mb-2":"mb-2__1GOTN","list-unstyled":"list-unstyled__2Opt7","half-opacity":"half-opacity__AJAwU",hidden:"hidden__2qkiN","hidden-input":"hidden-input__3dJX6",footer:"footer__3W8aw","footer-wrap":"footer-wrap__2Dsf3","footer-list-item":"footer-list-item__2tze3",sidebar:"sidebar__2DGFw",active:"active__1uNnP",content:"content__2k01N","full-screen":"full-screen__18ZQD"}}},[[856,1,3]]])}));